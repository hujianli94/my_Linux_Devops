<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.1. LAMP+WordPress环境 &mdash; 运维开发修炼之路</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6.2. LAMP企业架构实战" href="02.LAMP%E4%BC%81%E4%B8%9A%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98.html" />
    <link rel="prev" title="6. LNMP、LAMP学习" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> 小健_Linux-shell-Devops_Blog
            <img src="../../_static/devops_photo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../DevOps/index.html">DevOps和自动化运维实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Github/index.html">Github入门到实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Jenkins/index.html">Jenkins持续化集成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../KVM/index.html">KVM实践</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01.%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%92%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/index.html">1. 命令行和操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02.Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE/index.html">2. Linux服务器架设</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03.%E7%8E%A9%E8%BD%ACshell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/index.html">3. 玩转shell脚本编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.%E7%8E%A9%E8%BD%AC%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88mysql%E3%80%81Redis%EF%BC%89/index.html">4. 玩转数据库(mysql、Redis)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.Nginx%E5%AD%A6%E4%B9%A0/index.html">5. Nginx学习</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">6. LNMP、LAMP学习</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.1. LAMP+WordPress环境</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lamp">6.1.1. 更多LAMP部署参考</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lampwordpress">6.1.2. LAMP与WordPress概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mariadb-mysql">6.1.3. 安装并配置MariaDB（MySQL）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#php">6.1.4. 3.安装并配置PHP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#phpmyadmin">6.1.5. 4.安装phpMyAdmin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wordpress">6.1.6. 5.部署WordPress程序</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">6.1.7. 测试LAMP环境安装的正确性</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="02.LAMP%E4%BC%81%E4%B8%9A%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98.html">6.2. LAMP企业架构实战</a></li>
<li class="toctree-l3"><a class="reference internal" href="03.LAMP%2BRedis%E4%BC%81%E4%B8%9A%E5%AE%9E%E6%88%98.html">6.3. LAMP+Radis企业实战</a></li>
<li class="toctree-l3"><a class="reference internal" href="04.LAMP%E4%BC%81%E4%B8%9A%E6%9E%B6%E6%9E%84%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html">6.4. MySQL主从同步、读写分离解决方案</a></li>
<li class="toctree-l3"><a class="reference internal" href="05.%E4%B8%80%E9%94%AE%E5%BF%AB%E9%80%9Flnmp.html">6.5. 一键快速lnmp</a></li>
<li class="toctree-l3"><a class="reference internal" href="06.%E5%AE%9D%E5%A1%94%E5%AE%89%E8%A3%85CRM%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6.html">6.6. 宝塔安装CRM系列软件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../07.Zabbix%E7%9B%91%E6%8E%A7%E4%BC%81%E4%B8%9A%E5%AE%9E%E6%88%98/index.html">7. Zabbix监控企业实战</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08.Linux%E6%9E%84%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84/index.html">8. 构建Linux高可用架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09.Zabbix3.0%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/index.html">9. Zabbix3.0入门到精通</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10.%E5%BF%AB%E9%80%9F%E9%98%85%E8%AF%BBLinux%E5%85%A5%E9%97%A8-%E9%98%BF%E9%93%ADLinux/index.html">10. 快速阅读Linux入门-阿铭Linux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Mysql/index.html">Mysql王者之路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other/index.html">Other</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Network_route_switch/index.html">Network_route_switch</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">小健_Linux-shell-Devops_Blog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Linux</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">6. </span>LNMP、LAMP学习</a> &raquo;</li>
      <li><span class="section-number">6.1. </span>LAMP+WordPress环境</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Linux/06.LAMP、LNMP学习/01.LAMP部署.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#lamp-wordpress" id="id2">LAMP+WordPress环境</a></p>
<ul>
<li><p><a class="reference internal" href="#lamp" id="id3">更多LAMP部署参考</a></p></li>
<li><p><a class="reference internal" href="#lampwordpress" id="id4">LAMP与WordPress概述</a></p>
<ul>
<li><p><a class="reference internal" href="#apache" id="id5">1.安装并配置Apache</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mariadb-mysql" id="id6">安装并配置MariaDB（MySQL）</a></p></li>
<li><p><a class="reference internal" href="#php" id="id7">3.安装并配置PHP</a></p></li>
<li><p><a class="reference internal" href="#phpmyadmin" id="id8">4.安装phpMyAdmin</a></p></li>
<li><p><a class="reference internal" href="#wordpress" id="id9">5.部署WordPress程序</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id10">测试LAMP环境安装的正确性</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="lamp-wordpress">
<h1><a class="toc-backref" href="#id2"><span class="section-number">6.1. </span>LAMP+WordPress环境</a><a class="headerlink" href="#lamp-wordpress" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LAMP = Linux + Apache + Mysql + PHP

可以全部部署在1台服务器上
也可以分离Mysql数据库进行部署
Apache和PHP需要在同一台机器上，因为PHP是作为Apache的一个模块存在的
</pre></div>
</div>
<section id="lamp">
<h2><a class="toc-backref" href="#id3"><span class="section-number">6.1.1. </span>更多LAMP部署参考</a><a class="headerlink" href="#lamp" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://www.cnblogs.com/f-ck-need-u/p/7642992.html">Lamp
https://www.cnblogs.com/f-ck-need-u/p/7642992.html</a>
<a class="reference external" href="http://www.apelearn.com/study_v2/chapter17.html">Lamp
http://www.apelearn.com/study_v2/chapter17.html</a></p>
</section>
<section id="lampwordpress">
<h2><a class="toc-backref" href="#id4"><span class="section-number">6.1.2. </span>LAMP与WordPress概述</a><a class="headerlink" href="#lampwordpress" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LAMP是一组构建Web应用平台的开源软件解决方案，它是一个开源套件组合。
其中，“L”指的是Linux（操作系统），“A”指的是Apache HTTP服务器，“M”指的是MySQL或者MariaDB，“P”指的是指Perl或Python。
这些开源软件本身都是各自独立的程序，但是因为常放在一起使用，拥有了越来越高的兼容性，所以，就用 LAMP 这个术语代表一个 Web应用平台解决方案。
在CentOS 7之前，LAMP就代表Linux、Apache、MySQL和PHP。
而随着CentOS 7系列发布的发布，由于CentOS 7中MySQL被MariaDB了，那么LAMP随之就变为Linux、Apache、MariaDB和PHP。
本节就在CentOS 7.1环境下介绍LAMP环境的搭建过程。
WordPress是一个免费的开源项目，在GNU通用公共许可证下授权发布。它使用PHP语言和MySQL数据库开发，最初是一款个人博客系统，目前已逐步演化成一款内容管理系统软件。
WordPress是世界上使用最广泛的博客系统，
因为使用者众多，所以WordPress社区非常活跃，有丰富的插件模板资源，易于扩充功能，安装、使用都非常方便。
这里我们想通过LAMP平台搭建一个WordPress网站系统，后台使用MariaDB数据库，并且使用phpMyAdmin管理数据库，
同时使用独立域名www.ixdba.net进行访问。下面介绍这个过程。
</pre></div>
</div>
<section id="apache">
<h3><a class="toc-backref" href="#id5">1.安装并配置Apache</a><a class="headerlink" href="#apache" title="Permalink to this headline">¶</a></h3>
<p>安装Apache的方法有很多种，这里选择通过yum方式进行安装，但需要Linux系统能够连接互联网，执行如下命令，安装Apache。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ～]#yum install httpd
默认安装的Apache版本为httpd-2.4.6-31.el7.centos.x86_64，
</pre></div>
</div>
<p>通过yum安装的Apache，安装完成后，</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>默认配置文件主目录位于/etc/httpd下，
Apache的主配置文件/etc/httpd/conf/httpd.conf
Apache 模块位于/usr/lib64/httpd/modules 目录下，
Apache 模块的配置文件位于/etc/httpd/conf.modules.d 目录下，
Web 根目录位于/var/www/html/目录下，
日志文件位于/var/log/httpd/目录下。


在/usr/lib64/httpd/modules目录中，可以看到有很多Apache模块。
这么多模块都是Apache默认安装的，但这些模块大部分并不是我们需要的，因而，要确保httpd高效、安全地工作，需要禁用其中一些模块，以提高 Apache 的性能，减少占用的内存。
禁用方法很简单，编辑/etc/httpd/conf/conf.modules.d目录下的每个文件，删除或注释掉不需要的模块即可。
这里重点关注/etc/httpd 目录。在这个目录下，有个 conf.d 目录。默认情况下，/etc/httpd/conf.d 目录下所有以“.conf”结尾的文件都会被读取。
因此，很多情况下，根本不需要修改主配置文件/etc/httpd/conf/httpd.conf，而是在/etc/httpd/conf.d/下新建一个以“.conf”结尾的文件来完成各种配置。
要实现独立域名访问，可通过配置 Apache 的虚拟主机来实现，这里在/etc/httpd/conf.d/目录下新建一个文件ixdba.conf，内容如下

[root@localhost ~]# cat /etc/httpd/conf.d/ixdba.conf
&lt;VirtualHost *:80&gt;
ServerAdmin  admin@ixdba.net
ServerName  www.ixdba.net
ServerAlias  www
DocumentRoot /data/www/html/ixdba
&lt;Directory &quot;/data/www/html/ixdba/&quot;&gt;
    Options  FollowSymLinks
    AllowOverride  All
    Require  all  granted
&lt;/Directory&gt;
ErrorLog /var/log/httpd/ixdba_error.log
CustomLog /var/log/httpd/ixdba_access.log combined
&lt;/VirtualHost&gt;
</pre></div>
</div>
<p>然后创建虚拟主机的文件夹。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">ixdba</span><span class="p">]</span><span class="c1">#mkdir -p  /data/www/html/ixdba/</span>
</pre></div>
</div>
<p>这个文件夹就是用来存放WordPress主程序的目录。接着将Apache设置为开机自启动模式，执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span>  <span class="n">ixdba</span><span class="p">]</span><span class="c1">#systemctl enable httpd</span>
</pre></div>
</div>
<p>输出类似如下。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="s1">&#39;/usr/lib/systemd/system/httpd.service&#39;</span> <span class="s1">&#39;/etc/systemd/system/multi-user.target.wants/httpd.service&#39;</span>
</pre></div>
</div>
<p>最后重新加载httpd，执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span>  <span class="n">ixdba</span><span class="p">]</span><span class="c1">#systemctl reload httpd</span>

<span class="n">systemctl</span> <span class="n">start</span> <span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>这样，Apache的安装和配置就完成了，将www.ixdba.net域名做好解析，然后访问这个地址，如果正确，就会就出现Apache的欢迎页面。</p>
</section>
</section>
<section id="mariadb-mysql">
<h2><a class="toc-backref" href="#id6"><span class="section-number">6.1.3. </span>安装并配置MariaDB（MySQL）</a><a class="headerlink" href="#mariadb-mysql" title="Permalink to this headline">¶</a></h2>
<p>MariaDB是MySQL的一个分支，采用GPL授权许可，目前主要由开源社区在维护。MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。目前，大型互联网用户以及Linux发行商纷纷抛弃MySQL，转投MariaDB阵营。MariaDB是目前最受关注的MySQL数据库衍生版，发展前景不可限量。CentOS从7.x版本开始默认使用MariaDB。
通过yum方式安装MariaDB非常简单，执行如下命令即可。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span>  <span class="n">app</span><span class="p">]</span><span class="c1">#yum install mariadb-server mariadb</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span>  <span class="n">app</span><span class="p">]</span><span class="c1">#rpm -q mariadb mariadb-server</span>
<span class="n">mariadb</span><span class="o">-</span><span class="mf">5.5.41</span><span class="o">-</span><span class="mf">2.</span><span class="n">el7_0</span><span class="o">.</span><span class="n">x86_64</span>
<span class="n">mariadb</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">5.5.41</span><span class="o">-</span><span class="mf">2.</span><span class="n">el7_0</span><span class="o">.</span><span class="n">x86_64</span>
</pre></div>
</div>
<p>安装完成后，将MariaDB设置为开机自启动，操作如下。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span>  <span class="n">app</span><span class="p">]</span><span class="c1">#systemctl enable mariadb</span>
</pre></div>
</div>
<p>输出类似如下。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="s1">&#39;/usr/lib/systemd/system/mariadb.service&#39;</span> <span class="s1">&#39;/etc/systemd/system/multi-user.target.wants/mariadb.service&#39;</span>
</pre></div>
</div>
<p>接着，启动MariaDB，执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span>  <span class="n">app</span><span class="p">]</span><span class="c1">#systemctl start mariadb</span>
</pre></div>
</div>
<p>最后，登录MariaDB，执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ~]#systemctl start mariadb.service
[root@localhost ~]#mysql -uroot -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 2
Server version: 5.5.60-MariaDB MariaDB Server

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

MariaDB [(none)]&gt;

[root@localhost ~]# systemctl stop mariadb
[root@localhost ~]# systemctl restart mariadb
[root@localhost ~]# systemctl status mariadb
● mariadb.service - MariaDB database server
   Loaded: loaded (/usr/lib/systemd/system/mariadb.service; enabled; vendor preset: disabled)
   Active: active (running) since 六 2019-02-23 14:36:37 CST; 6s ago
  Process: 41936 ExecStartPost=/usr/libexec/mariadb-wait-ready $MAINPID (code=exited, status=0/SUCCESS)
  Process: 41905 ExecStartPre=/usr/libexec/mariadb-prepare-db-dir %n (code=exited, status=0/SUCCESS)
 Main PID: 41935 (mysqld_safe)
   CGroup: /system.slice/mariadb.service
           ├─41935 /bin/sh /usr/bin/mysqld_safe --basedir=/usr
           └─42035 /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-dir=/usr/lib64/mysql/plugin --log-er...

2月 23 14:36:35 localhost.localdomain systemd[1]: Starting MariaDB database server...
2月 23 14:36:35 localhost.localdomain mariadb-prepare-db-dir[41905]: Database MariaDB is probably initialized in /var/li...ne.
2月 23 14:36:35 localhost.localdomain mysqld_safe[41935]: 190223 14:36:35 mysqld_safe Logging to &#39;/var/lib/mysql/localh...rr&#39;.
2月 23 14:36:35 localhost.localdomain mysqld_safe[41935]: 190223 14:36:35 mysqld_safe Starting mysqld daemon with datab...ysql
2月 23 14:36:37 localhost.localdomain systemd[1]: Started MariaDB database server.
Hint: Some lines were ellipsized, use -l to show in full.
</pre></div>
</div>
<p>MariaDB
通过内置的安全配置脚本可实现对数据库的安全保护，执行“/usr/bin/mysql_secure_installation”命令，加固MariaDB数据库，操作过程如下。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost yum.repos.d]# mysql_secure_installation
NOTE:  RUNNING  ALL  PARTS  OF  THIS  SCRIPT  IS  RECOMMENDED  FOR  ALL  MariaDB
      SERVERS  IN  PRODUCTION  USE!   PLEASE  READ  EACH  STEP  CAREFULLY!
Enter  current  password  for  root  (enter  for  none):
#这里输入目前MariaDB数据库的root密码，默认是空
OK,  successfully  used  password,  moving  on...
Setting  the  root  password  ensures  that  nobody  can  log  into  the  MariaDB
root  user  without  the  proper  authorisation.
Set root password? [Y/n] y
#这里询问是否设置MariaDB数据库root的密码，输入&quot;Y&quot;给root用户设置一个新密码
New  password:
Re-enter  new  password:
Password  updated  successfully!
Reloading  privilege  tables..
 ...  Success!
By  default,  a  MariaDB  installation  has  an  anonymous  user,  allowing  anyone
to  log  into  MariaDB  without  having  to  have  a  user  account  created  for
them.   This  is  intended  only  for  testing,  and  to  make  the  installation
go  a  bit  smoother.   You  should  remove  them  before  moving  into  a
production  environment.
Remove anonymous users? [Y/n] y  #这里询问是否删除anonymous用户，输入&quot;Y&quot;删除
 ...  Success!
  Normally,  root  should  only  be  allowed  to  connect  from  &#39;localhost&#39;.   This
ensures  that  someone  cannot  guess  at  the  root  password  from  the  network.
Disallow root login remotely? [Y/n] y  #这里询问是否关闭root用户远程登录权限，输入&quot;Y&quot;
 ...  Success!
By  default,  MariaDB  comes  with  a  database  named  &#39;test&#39;  that  anyone  can
access.   This  is  also  intended  only  for  testing,  and  should  be  removed
before  moving  into  a  production  environment.
Remove test database and access to it? [Y/n] y   #这里询问是否删除测试数据库及其权限，输入&quot;Y&quot;
 -  Dropping  test  database...
 ...  Success!
 -  Removing  privileges  on  test  database...
 ...  Success!
Reloading  the  privilege  tables  will  ensure  that  all  changes  made  so  far
will  take  effect  immediately.
Reload privilege tables now? [Y/n] y   #这里询问是否重新载入授权表，输入&quot;Y&quot;
 ...  Success!
Cleaning  up...
All  done!   If  you&#39;ve  completed  all  of  the  above  steps,  your  MariaDB
installation  should  now  be  secure.
Thanks  for  using  MariaDB!
至此，MariaDB数据库安装完成了。
</pre></div>
</div>
</section>
<section id="php">
<h2><a class="toc-backref" href="#id7"><span class="section-number">6.1.4. </span>3.安装并配置PHP</a><a class="headerlink" href="#php" title="Permalink to this headline">¶</a></h2>
<p>这里仍以yum方式介绍如何安装和配置PHP。CentOS
7.1版本中，默认的PHP版本为PHP
5.4，可直接执行如下命令进行PHP以及相关模块的安装：
很多时候，对PHP环境要求较新的版本，例如，PHP
5.6环境，如果通过源码编译、安装，将会非常麻烦。这里提供一种通过yum工具安装最新PHP
版本的方法。首先，需要在系统上安装一个扩展yum源，即epel源，可从http://fedoraproject.org/wiki/EPEL
网站下载针对CentOS 7版本的epel文件，然后进行安装，操作过程如下。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum install epel-release</span>
<span class="c1"># rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</span>
</pre></div>
</div>
<p>默认情况下，REMI是禁用的。要检查REMI源是否已经成功安装，可以执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ～]# yum repolist disabled | grep remi
</pre></div>
</div>
<p>要搜索REMI仓库中是否有可用的包，可以执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ～]# yum --enablerepo=remi list php
</pre></div>
</div>
<p>或者</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ～]# yum --enablerepo=remi-php56 list php
</pre></div>
</div>
<p>通过这种方式，就可以很方便地安装自己需要的PHP版本。例如，要安装PHP，5.6版本，执行如下命令即可。</p>
</section>
<section id="phpmyadmin">
<h2><a class="toc-backref" href="#id8"><span class="section-number">6.1.5. </span>4.安装phpMyAdmin</a><a class="headerlink" href="#phpmyadmin" title="Permalink to this headline">¶</a></h2>
<p>phpMyAdmin是一个用PHP编写的软件工具，可以通过Web方式控制和操作MySQL数据库，
管理者可以通过Web接口的方式远程管理MySQL数据库
可以很方便地建立、修改、删除数据库及表，通过phpMyAdmin可以使MySQL数据库的管理变得十分简单和高效。
下面通过yum方式安装phpMyAdmin，操作过程如下。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="o">--</span><span class="n">enablerepo</span><span class="o">=</span><span class="n">remi</span> <span class="o">--</span><span class="n">enablerepo</span><span class="o">=</span><span class="n">remi</span><span class="o">-</span><span class="n">php56</span> <span class="n">phpmyadmin</span>
</pre></div>
</div>
<p>yum会自动寻找依赖软件包，然后自动完成phpMyAdmin的安装。
phpMyAdmin的默认安装目录是/usr/share/phpMyAdmin，
同时会在Apache的配置文件目录中自动创建虚拟主机配置文件/etc/httpd/conf.d/phpMyAdmin.conf。
由于这里介绍的 Apache版本是Apache
2.4.6，所以需要对phpMyAdmin.conf文件做些修改，
在phpMyAdmin.conf文件中找到类似下面的内容。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Allow</span>  <span class="kn">from</span>  <span class="mf">127.0.0.1</span>
<span class="n">Allow</span>  <span class="kn">from</span>  <span class="p">::</span><span class="mi">1</span>
</pre></div>
</div>
<p>将这些内容修改为：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Require</span>  <span class="nb">all</span>  <span class="n">granted</span>
</pre></div>
</div>
<p>这里“Require all granted“的含义类似于Apache之前版本中的“Allow from
all”，表示任何地方都可以访问，如果不对这个设置做修改，将在访问的时候出现403错误。
然后，重新启动httpd服务，执行如下命令。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ～]# systemctl restart httpd
最后，通过地址http://www.ixdba.net/phpMyAdmin/ 访问phpMyAdmin，
设置登录语言为中文，登录用户名root，
密码就是上面通过mysql_secure_installation设置的那个密码，
即可登录phpMyAdmin。
</pre></div>
</div>
</section>
<section id="wordpress">
<h2><a class="toc-backref" href="#id9"><span class="section-number">6.1.6. </span>5.部署WordPress程序</a><a class="headerlink" href="#wordpress" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>WordPress 的官网为 https://wordpress.org，中文官网为 http://cn.wordpress.org/，
读者可以在这两个网站下载WordPress安装程序。
目前最新的稳定版本为WordPress 4.2.2，这里下载的是中文版本wordpress-4.2.2-zh_CN.zip，
把解压后的程序上传到前面设置虚拟服务器时设定的文件夹/data/www/html/ixdba下。
  mv wordpress-5.0.3-zh_CN.zip /data/www/html/ixdba/
  cd /data/www/html/ixdba/
  mv wordpress-5.0.3-zh_CN.zip ../
  unzip wordpress-5.0.3-zh_CN.zip
  mv wordpress/* ixdba/
默认情况下，httpd服务的运行用户为apache。为了安全起见，
我们添加另一个普通用户作为httpd服务的运行账号，执行如下命令添加一个系统用户。
 [root@localhost ～]# useradd ixdba
[root@localhost ～]# passwd ixdba
</pre></div>
</div>
<p>用户创建完成后，还需要将 WordPress 程序中所有文件都修改为 ixdba
用户权限，执行如下操作。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@localhost ～]# chown -R ixdba:ixdba /data/www/html/ixdba
</pre></div>
</div>
<p>最后，修改/etc/httpd/conf/httpd.conf文件，找到如下内容。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">User</span>  <span class="n">apache</span>
<span class="n">Group</span>  <span class="n">apache</span>
</pre></div>
</div>
<p>修改为：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">User</span>  <span class="n">ixdba</span>
<span class="n">Group</span>  <span class="n">ixdba</span>
</pre></div>
</div>
<p>这两个选项设置httpd服务的运行用户和组，这里修改为ixdba用户和ixdba组。
为了运行WordPress程序，还需要在数据库中提前创建一个用于存储WordPress数据的库。这里将WordPress的数据库命名为cmsdb。下面开始创建数据库。
先登录MariaDB数据库，执行如下操作。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1"># mysql -uroot -padmin#123</span>
<span class="n">Welcome</span> <span class="n">to</span> <span class="n">the</span> <span class="n">MariaDB</span> <span class="n">monitor</span><span class="o">.</span>  <span class="n">Commands</span> <span class="n">end</span> <span class="k">with</span> <span class="p">;</span> <span class="ow">or</span> \<span class="n">g</span><span class="o">.</span>
<span class="n">Your</span> <span class="n">MariaDB</span> <span class="n">connection</span> <span class="nb">id</span> <span class="ow">is</span> <span class="mi">43</span>
<span class="n">Server</span> <span class="n">version</span><span class="p">:</span> <span class="mf">5.5.60</span><span class="o">-</span><span class="n">MariaDB</span> <span class="n">MariaDB</span> <span class="n">Server</span>

<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Oracle</span><span class="p">,</span> <span class="n">MariaDB</span> <span class="n">Corporation</span> <span class="n">Ab</span> <span class="ow">and</span> <span class="n">others</span><span class="o">.</span>

<span class="n">Type</span> <span class="s1">&#39;help;&#39;</span> <span class="ow">or</span> <span class="s1">&#39;\h&#39;</span> <span class="k">for</span> <span class="n">help</span><span class="o">.</span> <span class="n">Type</span> <span class="s1">&#39;\c&#39;</span> <span class="n">to</span> <span class="n">clear</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">input</span> <span class="n">statement</span><span class="o">.</span>

<span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">create</span> <span class="n">database</span> <span class="n">cmsdb</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">grant</span>  <span class="nb">all</span>  <span class="n">on</span>  <span class="n">cmsdb</span><span class="o">.*</span>  <span class="n">to</span>  <span class="s1">&#39;ixdba&#39;</span>  <span class="n">identified</span>  <span class="n">by</span>  <span class="s1">&#39;ixdbapassword&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">flush</span> <span class="n">privileges</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>


<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">ixdba</span><span class="p">:</span><span class="n">ixdba</span> <span class="n">ixdba</span><span class="o">/</span>
</pre></div>
</div>
<p><img alt="image0" src="../../_images/wordpress.png" /></p>
<p>这个就是WordPress的安装向导界面，
安装过程会提示输入连接数据库的地址、库名、用户名、密码、表前缀，
数据库地址默认是 localhost，保持默认地址即可，
库名、用户名和密码分别为之前设置的 cmsdb、ixdba 和 ixdbapassword，
数据库表前缀保持默认前缀即可。根据向导依次进行操作即可完成安装。</p>
</section>
<section id="id1">
<h2><a class="toc-backref" href="#id10"><span class="section-number">6.1.7. </span>测试LAMP环境安装的正确性</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>在LAMP
环境搭建起来之后，如何测试PHP环境的正确性呢？如何知道安装了哪些模块，缺少了哪些模块？非常简单！只需要几行代码就能搞定，请看下面一段代码。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php  phpinfo();  ?&gt;
</pre></div>
</div>
<p>将这段代码保存的一个文件中，命名为phpinfo.php，然后放到Web服务的根目录下。通过浏览器访问http://ip/phpinfo.php;
<img alt="image1" src="../../_images/phpinfo.png" /></p>
<p>在这个页面中，显示了PHP的各种信息。通过这个页面，读者就能清晰地知道PHP环境中都安装了哪些模块，哪些模块没有安装，这对于部署或配置LAMP环境来说至关重要</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="6. LNMP、LAMP学习" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="02.LAMP%E4%BC%81%E4%B8%9A%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98.html" class="btn btn-neutral float-right" title="6.2. LAMP企业架构实战" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, huxiaojian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>