<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.2. 2 字符串与数组 &mdash; 运维开发修炼之路</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.3. 3 运算符" href="03.%E8%BF%90%E7%AE%97%E7%AC%A6.html" />
    <link rel="prev" title="3.1. 1 基础知识" href="01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> 小健_Linux-shell-Devops_Blog
            <img src="../../_static/devops_photo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Cloud_migration/index.html">Cloud_migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DevOps/index.html">DevOps和自动化运维实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Github/index.html">Github入门到实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Jenkins/index.html">Jenkins持续化集成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../KVM/index.html">KVM实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Linux_Cluster/index.html">Linux服务构建实战</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01.%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%92%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/index.html">1. 命令行和操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02.Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE/index.html">2. Linux服务器架设</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">3. 玩转shell脚本编程</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html">3.1. 1 基础知识</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.2. 2 字符串与数组</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">3.2.1. 1 字符串常用操作</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shell">3.2.2. 2. Shell变量操作</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">3.2.3. 3 数组</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">3.2.4. 4 字符显示颜色</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="03.%E8%BF%90%E7%AE%97%E7%AC%A6.html">3.3. 3 运算符</a></li>
<li class="toctree-l3"><a class="reference internal" href="04.%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6.html">3.4. 4 流程控制</a></li>
<li class="toctree-l3"><a class="reference internal" href="05.%E5%87%BD%E6%95%B0.html">3.5. 5 函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="06.%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html">3.6. 6 正则表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="07.%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep.html">3.7. 7 三剑客之grep</a></li>
<li class="toctree-l3"><a class="reference internal" href="08.%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed.html">3.8. 8 三剑客之sed</a></li>
<li class="toctree-l3"><a class="reference internal" href="09.%E4%B8%89%E5%89%91%E5%AE%A2-awk.html">3.9. 9 三剑客之awk</a></li>
<li class="toctree-l3"><a class="reference internal" href="10.shell%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9D%82%E9%A1%B9.html">3.10. shell技巧与杂项</a></li>
<li class="toctree-l3"><a class="reference internal" href="11.xagrs%E4%BD%BF%E7%94%A8.html">3.11. xagrs使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="12.%E6%94%B6%E9%9B%86%E7%9A%84%E4%B8%80%E4%BA%9Bshell%E8%84%9A%E6%9C%AC.html">3.12. 收集的一些shell脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="13.%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%84%9A%E6%9C%AC.html">3.13. 自动化安装zabbix</a></li>
<li class="toctree-l3"><a class="reference internal" href="14.%E8%87%AA%E5%8A%A8%E5%8C%96%E5%AE%89%E8%A3%85cacti%E8%84%9A%E6%9C%AC.html">3.14. 自动化安装cacti服务器</a></li>
<li class="toctree-l3"><a class="reference internal" href="15.%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85MongoDB%E8%84%9A%E6%9C%AC.html">3.15. 自动化安装MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="16.%E5%A4%87%E4%BB%BDMongoDB%E8%84%9A%E6%9C%AC.html">3.16. 备份MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="17.%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85memcached%E8%84%9A%E6%9C%AC.html">3.17. 自动安装memcached</a></li>
<li class="toctree-l3"><a class="reference internal" href="18.system%E6%A3%80%E6%B5%8B%E8%84%9A%E6%9C%AC.html">3.18. 系统各项内容检测check_os</a></li>
<li class="toctree-l3"><a class="reference internal" href="19.%E5%AE%89%E8%A3%85tomcat%E8%84%9A%E6%9C%AC.html">3.19. 安装tomcat脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="20.install_zookeeper%E8%84%9A%E6%9C%AC.html">3.20. install_zookeeper脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="21.install_elasticserch%E8%84%9A%E6%9C%AC.html">3.21. install_elasticserch脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="22.%E8%87%AA%E5%8A%A8Autoinstall_ELK_V1.3.html">3.22. 自动Autoinstall_ELK_V1.3脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="23.install_vsftpd%E8%84%9A%E6%9C%AC.html">3.23. install_vsftpd_or_nfs脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="24.install_mysql5.7.html">3.24. install_mysql5.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="25.Linux%E4%B8%8B%E4%BB%A5%E7%A7%92%E4%B8%BA%E5%8D%95%E4%BD%8D%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC.html">3.25. Linux下以秒为单位执行脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="26.%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6shell%E8%84%9A%E6%9C%AC.html">3.26. 备份文件shell脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="27.monitor_Linux%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD.html">3.27. monitor_Linux系统性能</a></li>
<li class="toctree-l3"><a class="reference internal" href="28.%E4%BF%AE%E6%94%B9IP_%E4%B8%BB%E6%9C%BA%E5%90%8D_%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF%E8%84%9A%E6%9C%AC.html">3.28. 修改IP_主机名_网卡信息脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="29.%E6%A3%80%E6%9F%A5%E6%81%B6%E6%84%8FIP%E7%99%BB%E5%BD%95%EF%BC%8C%E6%8B%92%E7%BB%9DSSH.html">3.29. 检查恶意IP登录，拒绝SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="30.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD.html">3.30. 数据库备份</a></li>
<li class="toctree-l3"><a class="reference internal" href="31.Centos6%E5%BC%80%E6%9C%BA%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html">3.31. Centos6x开机性能优化</a></li>
<li class="toctree-l3"><a class="reference internal" href="32.%E7%99%BE%E5%AE%9D%E7%AE%B1%E8%84%9A%E6%9C%AC.html">3.32. 百宝箱脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="33.deploy_mongo.html">3.33. 使用python脚本安装MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="34.python%E5%AE%9E%E7%8E%B0%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F.html">3.34. python实现端口扫描</a></li>
<li class="toctree-l3"><a class="reference internal" href="35.python%E6%A3%80%E6%B5%8Bip%E5%AD%98%E6%B4%BB%E7%8A%B6%E6%80%81.html">3.35. python检测ip存活状态</a></li>
<li class="toctree-l3"><a class="reference internal" href="36.k8s_deploy%E8%84%9A%E6%9C%AC.html">3.36. k8s_deploy脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="37.example%28%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%29.html">3.37. example(字符串处理)</a></li>
<li class="toctree-l3"><a class="reference internal" href="38.%E7%94%A8Python%E5%AE%9E%E7%8E%B0%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BDMongodb%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%B9%B6%E4%B8%8A%E4%BC%A0%E5%88%B0FTP%E6%9C%8D%E5%8A%A1%E5%99%A8.html">3.38. 用Python实现定时备份Mongodb数据，并上传到FTP服务器</a></li>
<li class="toctree-l3"><a class="reference internal" href="39.Nginx%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2%E8%84%9A%E6%9C%AC.html">3.39. Nginx日志切割脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="40.%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85Docker%E8%84%9A%E6%9C%AC.html">3.40. 一键安装docker脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="41.shell%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E8%84%9A%E6%9C%AC.html">3.41. shell实现多并发控制</a></li>
<li class="toctree-l3"><a class="reference internal" href="42.%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B.html">3.42. 判断文件类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="43.%E7%94%A8if%E8%AF%AD%E5%8F%A5%E7%BC%96%E5%86%99%E9%80%89%E6%8B%A9%E8%8F%9C%E5%8D%95.html">3.43. 用if语句编写选择菜单</a></li>
<li class="toctree-l3"><a class="reference internal" href="44.%E4%BD%BF%E7%94%A8while%E8%AF%AD%E5%8F%A5%E7%BC%96%E5%86%99%E9%80%89%E6%8B%A9%E8%8F%9C%E5%8D%95.html">3.44. 使用while语句编写选择菜单</a></li>
<li class="toctree-l3"><a class="reference internal" href="45.%E4%BD%BF%E7%94%A8until%E7%BC%96%E5%86%99%E9%80%89%E6%8B%A9%E8%8F%9C%E5%8D%95.html">3.45. 使用until编写选择菜单</a></li>
<li class="toctree-l3"><a class="reference internal" href="46.%E7%9B%AE%E5%BD%95%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BD.html">3.46. 目录定时备份</a></li>
<li class="toctree-l3"><a class="reference internal" href="47.%E8%BF%9C%E7%A8%8B%E6%93%8D%E4%BD%9Cftp%E8%BF%9B%E8%A1%8C%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD.html">3.47. 远程操作ftp进行上传和下载</a></li>
<li class="toctree-l3"><a class="reference internal" href="48.%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC.html">3.48. 48.批量创建用户脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="49.Centos%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%28%E9%99%84%E5%B8%A6%E5%8D%87%E7%BA%A7%E8%84%9A%E6%9C%AC%29.html">3.49. Centos升级内核版本(附带升级脚本)</a></li>
<li class="toctree-l3"><a class="reference internal" href="50.CPU%E7%9B%91%E6%8E%A7%E8%84%9A%E6%9C%AC.html">3.50. CPU监控脚本</a></li>
<li class="toctree-l3"><a class="reference internal" href="51.%E6%A3%80%E6%B5%8B%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%98%AF%E5%90%A6%E8%B6%85%E6%97%B6.html">3.51. 检测函数执行是否超时</a></li>
<li class="toctree-l3"><a class="reference internal" href="52.%E8%80%81%E7%94%B7%E5%AD%A9Shell%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98.html">3.52. 老男孩Shell编程实战</a></li>
<li class="toctree-l3"><a class="reference internal" href="52.%E8%80%81%E7%94%B7%E5%AD%A9Shell%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98.html#define-var">3.53. define var</a></li>
<li class="toctree-l3"><a class="reference internal" href="53.%E5%BF%AB%E6%8D%B7%E5%AE%89%E8%A3%85%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%ACPython.html">3.54. 快捷安装不同版本Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="54.%E5%B8%B8%E7%94%A8shell%E8%84%9A%E6%9C%AC%E5%A4%A7%E5%85%A8.html">3.55. 常用shell脚本大全</a></li>
<li class="toctree-l3"><a class="reference internal" href="55.%E7%BC%96%E5%86%99Shell%E8%84%9A%E6%9C%AC%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html">3.56. 编写Shell脚本的最佳实践</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../04.%E7%8E%A9%E8%BD%AC%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88mysql%E3%80%81Redis%EF%BC%89/index.html">4. 玩转数据库(mysql、Redis)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.Nginx%E5%AD%A6%E4%B9%A0/index.html">5. Nginx学习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06.LAMP%E3%80%81LNMP%E5%AD%A6%E4%B9%A0/index.html">6. LNMP、LAMP学习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07.Zabbix%E7%9B%91%E6%8E%A7%E4%BC%81%E4%B8%9A%E5%AE%9E%E6%88%98/index.html">7. Zabbix监控企业实战</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08.Linux%E6%9E%84%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84/index.html">8. 构建Linux高可用架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09.Zabbix3.0%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/index.html">9. Zabbix3.0入门到精通</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10.%E5%BF%AB%E9%80%9F%E9%98%85%E8%AF%BBLinux%E5%85%A5%E9%97%A8-%E9%98%BF%E9%93%ADLinux/index.html">10. 快速阅读Linux入门-阿铭Linux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Mysql/index.html">Mysql王者之路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Openstack/index.html">Openstack实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other/index.html">Other</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Network_route_switch/index.html">Network_route_switch</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">小健_Linux-shell-Devops_Blog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Linux</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">3. </span>玩转shell脚本编程</a> &raquo;</li>
      <li><span class="section-number">3.2. </span>2 字符串与数组</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Linux/03.玩转shell脚本编程/02.字符串与数组.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id1" id="id25">2 字符串与数组</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id26">1 字符串常用操作</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id27">1.1 获取字符串长度</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id28">1.2 字符串切片</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id29">1.3 字符串替换</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id30">1.4 字符串删除</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id31">1.5 字符串截取</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id32">1.6 变量状态赋值</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#shell" id="id33">2. Shell变量操作</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id34">2.1 变量替换扩展</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id35">2.2 变量字符串操作</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id36">2.3 代码总结</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id12" id="id37">3 数组</a></p>
<ul>
<li><p><a class="reference internal" href="#id13" id="id38">3.1 数组定义</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id39">3.2 通过元素值集合来创建数组变量</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id40">3.3 通过键值对定义数组</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id41">3.4 数组元素读取</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id42">3.5 以切片方式获取部分数组元素</a></p></li>
<li><p><a class="reference internal" href="#declare" id="id43">3.6 通过declare语句定义关联数组</a></p></li>
<li><p><a class="reference internal" href="#id19" id="id44">3.7 在数组末尾追加新元素</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id45">3.8 通过循环为数组赋值</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id46">3.9 数组元素的替换</a></p></li>
<li><p><a class="reference internal" href="#id22" id="id47">3.10 删除数组</a></p></li>
<li><p><a class="reference internal" href="#id23" id="id48">3.11 数组的其它操作</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id24" id="id49">4 字符显示颜色</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="id1">
<h1><a class="toc-backref" href="#id25"><span class="section-number">3.2. </span>2 字符串与数组</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<section id="id2">
<h2><a class="toc-backref" href="#id26"><span class="section-number">3.2.1. </span>1 字符串常用操作</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<section id="id3">
<h3><a class="toc-backref" href="#id27">1.1 获取字符串长度</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>方式1 利用<code class="docutils literal notranslate"><span class="pre">${#var}</span></code>来获取字符串长度</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># var=&#39;abcstring&#39;</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${#var}</span>
<span class="mi">9</span>
</pre></div>
</div>
<p>方式2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># $string上的双引号必不可少</span>
<span class="n">expr</span> <span class="n">length</span> <span class="s2">&quot;$string&quot;</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id28">1.2 字符串切片</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>格式：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>·${parameter:offset}

·${parameter:offset:length}
</pre></div>
</div>
<p>截取从 offset 个字符开始，向后 length 个字符。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># var=&quot;hello shell&quot;</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var:0}</span>
<span class="n">hello</span> <span class="n">shell</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var:0:5}</span>
<span class="n">hello</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var:6:5}</span>
<span class="n">shell</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var:(-1)}</span>
<span class="n">l</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var:(-2)}</span>
<span class="n">ll</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var:(-5):2}</span>
<span class="n">sh</span>
</pre></div>
</div>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id29">1.3 字符串替换</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>格式：${parameter/pattern/string}</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>${PARAMETER/PATTERN/STRING}
${PARAMETER//PATTERN/STRING}
${PARAMETER/PATTERN}
${PARAMETER//PATTERN}
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>操作符“/”表示只替换一个匹配的字符串，而操作符“//”表示替换所有匹配的字符串。
如果没有指定替换字符串STRING，那么匹配的内容将被替换为空字符串，即被删除。
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># var=&quot;hello shell&quot;</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${var/shell/world}</span>
<span class="n">hello</span> <span class="n">world</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@swarm</span><span class="o">-</span><span class="n">manager2</span> <span class="n">Test</span><span class="p">]</span><span class="c1"># MYSTRING=&quot;This is used for replacing string or removing string&quot;</span>
<span class="c1">#替换字符串中一个匹配</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@swarm</span><span class="o">-</span><span class="n">manager2</span> <span class="n">Test</span><span class="p">]</span><span class="c1"># echo ${MYSTRING/string/characters}</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">replacing</span> <span class="n">characters</span> <span class="ow">or</span> <span class="n">removing</span> <span class="n">string</span>

<span class="c1">##替换所有匹配</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@swarm</span><span class="o">-</span><span class="n">manager2</span> <span class="n">Test</span><span class="p">]</span><span class="c1"># echo ${MYSTRING//string/characters}</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">replacing</span> <span class="n">characters</span> <span class="ow">or</span> <span class="n">removing</span> <span class="n">characters</span>

<span class="c1"># 删除一个匹配</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@swarm</span><span class="o">-</span><span class="n">manager2</span> <span class="n">Test</span><span class="p">]</span><span class="c1"># echo ${MYSTRING/string/}</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">replacing</span>  <span class="ow">or</span> <span class="n">removing</span> <span class="n">string</span>

<span class="c1"># 删除所有匹配</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@swarm</span><span class="o">-</span><span class="n">manager2</span> <span class="n">Test</span><span class="p">]</span><span class="c1"># echo ${MYSTRING//string/}</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">replacing</span>  <span class="ow">or</span> <span class="n">removing</span>
</pre></div>
</div>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id30">1.4 字符串删除</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ hujianli=&quot;hello fred，/home/fred, this is test var fred&quot;

# 删除变量中匹配到1次的元素     /元素
$ echo ${hujianli/fred}
hello ，/home/fred, this is test var fred


# 删除变量中开头匹配到的元素   /#元素
$ echo ${hujianli/#fred}
hello fred，/home/fred, this is test var fred

# 删除变量中结尾匹配到的元素    /%元素
$ echo ${hujianli/%fred}
hello fred，/home/fred, this is test var

# 删除变量中所有匹配到的元素     //元素
$ echo ${hujianli//fred}
hello ，/home/, this is test var
</pre></div>
</div>
<p>字符串变量大小写转换</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo ${hujianli^^}
HELLO FRED，/HOME/FRED, THIS IS TEST VAR FRED

$ echo ${hujianli,,}
hello fred，/home/fred, this is test var fred
</pre></div>
</div>
</section>
<section id="id7">
<h3><a class="toc-backref" href="#id31">1.5 字符串截取</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>格式：</p>
<p>${parameter#word} # 删除匹配前缀</p>
<p>${parameter##word}</p>
<p>${parameter%word} # 删除匹配后缀</p>
<p>${parameter%%word}</p>
<p># 去掉左边，最短匹配模式，##最长匹配模式。</p>
<p>% 去掉右边，最短匹配模式，%%最长匹配模式。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># url=&quot;https://www.baidu.com/index.html&quot;</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${url#*/}</span>
<span class="o">/</span><span class="n">www</span><span class="o">.</span><span class="n">baidu</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${url##*/}</span>
<span class="n">index</span><span class="o">.</span><span class="n">html</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${url%/*}</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">baidu</span><span class="o">.</span><span class="n">com</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@xuel</span><span class="o">-</span><span class="n">tmp</span><span class="o">-</span><span class="n">shell</span> <span class="o">~</span><span class="p">]</span><span class="c1"># echo ${url%%/*}</span>
<span class="n">https</span><span class="p">:</span>
</pre></div>
</div>
</section>
<section id="id8">
<h3><a class="toc-backref" href="#id32">1.6 变量状态赋值</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>${VAR:-string} 如果 VAR 变量为空则返回 string</p>
<p>${VAR:+string} 如果 VAR 变量不为空则返回 string</p>
<p>${VAR:=string} 如果 VAR 变量为空则重新赋值 VAR 变量值为 string</p>
<p>${VAR:?string} 如果 VAR 变量为空则将 string 输出到 stderr</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[root@xuel-tmp-shell ~]# url=&quot;https://www.baidu.com/index.html&quot;
[root@xuel-tmp-shell ~]# echo ${url:-&quot;string&quot;}
https://www.baidu.com/index.html
[root@xuel-tmp-shell ~]# echo ${url:+&quot;string&quot;}
string
[root@xuel-tmp-shell ~]# unset url
[root@xuel-tmp-shell ~]# echo $url

[root@xuel-tmp-shell ~]# echo ${url:-&quot;string&quot;}
string
[root@xuel-tmp-shell ~]# echo ${url:+&quot;string&quot;}


找出/etc/group下的所有组名称
for i in `cat /etc/group`;do echo ${i%%:*};done
</pre></div>
</div>
</section>
</section>
<section id="shell">
<h2><a class="toc-backref" href="#id33"><span class="section-number">3.2.2. </span>2. Shell变量操作</a><a class="headerlink" href="#shell" title="Permalink to this headline">¶</a></h2>
<section id="id9">
<h3><a class="toc-backref" href="#id34">2.1 变量替换扩展</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<figure class="align-default">
<img alt="" src="../../_images/shell_var0001.png" />
</figure>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id35">2.2 变量字符串操作</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<figure class="align-default">
<img alt="" src="../../_images/shell_var0002.png" />
</figure>
</section>
<section id="id11">
<h3><a class="toc-backref" href="#id36">2.3 代码总结</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1">##################### 变量赋值 ##################################################</span>
<span class="nv">WORD</span><span class="o">=</span>car
<span class="nb">echo</span> <span class="nv">$WORD</span>

<span class="c1">###################### 间接参数扩展 ###############################################</span>
<span class="nv">PAR</span><span class="o">=</span>TEMP
<span class="nv">TEMP</span><span class="o">=</span><span class="s2">&quot;Thfiles files test TEMP&quot;</span>

<span class="nb">echo</span> <span class="si">${</span><span class="p">!PAR</span><span class="si">}</span>
<span class="nb">echo</span> <span class="nv">$PAR</span>


<span class="c1">##################### 大小写修改 ####################################################</span>
<span class="c1"># 首字母大写</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">TEMP</span><span class="p">^</span><span class="si">}</span>
<span class="c1"># 全部大写</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">TEMP</span><span class="p">^^</span><span class="si">}</span>
<span class="c1"># 首字母小写</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">TEMP</span><span class="p">,</span><span class="si">}</span>
<span class="c1"># 全部小写</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">TEMP</span><span class="p">,,</span><span class="si">}</span>
<span class="c1"># 首字母小写</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">TEMP</span><span class="p">~</span><span class="si">}</span>
<span class="c1"># 大小写转换</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">TEMP</span><span class="p">~~</span><span class="si">}</span>


<span class="c1"># ----------------- 将当前目录下的所有后缀为txt的文件名转换为小写 --------------</span>
<span class="c1">#for file in *.txt ; do</span>
<span class="c1">#    mv &quot;$file&quot; &quot;${file,,}&quot;</span>
<span class="c1">#done</span>


<span class="c1">#############################  字符串移除 ###################################################</span>
<span class="nv">MYSTRING</span><span class="o">=</span><span class="s2">&quot;This is used for removing string&quot;</span>

<span class="c1"># 从左到右分割显示第一个空格之后的内容</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">#* </span><span class="si">}</span>   <span class="c1"># is used for removing string</span>

<span class="c1"># 从左到右分割显示最后一个空格之后的内容</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">##* </span><span class="si">}</span>  <span class="c1"># string</span>


<span class="c1"># 从右到左分割显示第一个空格之后的内容</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">% *</span><span class="si">}</span>     <span class="c1"># This is used for removing</span>

<span class="c1"># 从右到左分割显示最后一个空格之后的内容</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">%% *</span><span class="si">}</span>    <span class="c1"># This</span>


<span class="c1">#-------------------------- 最常用的用途是提取文件名的一部分 --------------</span>
<span class="nv">FILENAME</span><span class="o">=</span>linux_bash.txt
<span class="nb">echo</span> <span class="si">${</span><span class="nv">FILENAME</span><span class="p">%.*</span><span class="si">}</span>        <span class="c1">#移除文件名的后缀    #linux_bash</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">FILENAME</span><span class="p">##*.</span><span class="si">}</span>       <span class="c1">#移除文件名，保留后缀  #txt</span>


<span class="nv">FILENAME</span><span class="o">=</span>/home/yantaol/linux_bash.txt
<span class="nb">echo</span> <span class="si">${</span><span class="nv">FILENAME</span><span class="p">%/*</span><span class="si">}</span>        <span class="c1">#移除文件名，保留目录名   #/home/yantaol</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">FILENAME</span><span class="p">##*/</span><span class="si">}</span>       <span class="c1">#移除目录名，保留文件名   #linux_bash.txt</span>



<span class="c1">################################################## 字符串搜索与替换 #############################</span>
<span class="c1"># 操作符“/”表示只替换一个匹配的字符串，而操作符“//”表示替换所有匹配的字符串。如果没有指定替换字符串STRING，那么匹配的内容将被替换为空字符串，即被删除。</span>
<span class="nv">MYSTRING</span><span class="o">=</span><span class="s2">&quot;This is used for replacing string or removing string&quot;</span>
<span class="c1"># 替换一次</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">/string/characters </span><span class="si">}</span>
<span class="c1"># 替换全部</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">//string/characters </span><span class="si">}</span>

<span class="c1"># 删除一次</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">/string </span><span class="si">}</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">//string </span><span class="si">}</span>
<span class="c1"># 删除全部</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">//string/</span><span class="si">}</span>


<span class="c1">############################################### 求字符串长度 ######################################</span>
<span class="c1"># 求字符串长度</span>
<span class="c1"># ${#PARAMETER}</span>
<span class="nv">MYSTRING</span><span class="o">=</span><span class="s2">&quot;Hello World&quot;</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">MYSTRING</span><span class="si">}</span>

<span class="c1"># 子字符串扩展：</span>
<span class="c1">#${PARAMETER:OFFSET}</span>
<span class="c1">#${PARAMETER:OFFSET:LENGTH}</span>

<span class="c1">#这种参数扩展格式将扩展参数值的一部分，从指定的位置开始截取指定长度的字符串，如果省略LENGTH，将截取到参数值的末尾</span>
<span class="nv">MYSTRING</span><span class="o">=</span><span class="s2">&quot;This is used for substring expansion.&quot;</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">:</span><span class="nv">8</span><span class="si">}</span>    <span class="c1"># used for substring expansion.</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">:</span><span class="nv">8</span><span class="p">:</span><span class="nv">10</span><span class="si">}</span> <span class="c1"># used for s</span>


<span class="c1">################################################ 使用默认值 ##########################################</span>
<span class="c1">#${PARAMETER:-WORD}</span>

<span class="c1">#${PARAMETER-WORD}</span>

<span class="c1">#如果参数PARAMETER是未定义，或为null时，这种模式会扩展WORD，否则将扩展参数PARAMETER。如果在PARAMETER和WORD之间略去了符号“:”，即上述语法中的第二种格式，只有参数PARAMETER是未定义时，才会使用WORD</span>

<span class="nb">unset</span> MYSTRING  <span class="c1"># 解除环境变量</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="k">:-</span><span class="nv">Hello</span><span class="p"> World</span><span class="si">}</span>

<span class="nb">unset</span> MYSTRING  <span class="c1"># 解除环境变量</span>
<span class="nv">MYSTRING</span><span class="o">=</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="k">:-</span><span class="nv">Hello</span><span class="p"> World</span><span class="si">}</span>

<span class="nv">MYSTRING</span><span class="o">=</span>Hi
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="k">:-</span><span class="nv">Hello</span><span class="p"> World</span><span class="si">}</span>

<span class="nb">unset</span> MYSTRING  <span class="c1"># 解除环境变量</span>
<span class="nv">MYSTRING</span><span class="o">=</span>
<span class="c1"># 当变量为空值时，去掉：打印空值，空值也是参数</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">-Hello World</span><span class="si">}</span>


<span class="nb">echo</span> <span class="s2">&quot;------------------------------------ 华丽的分割线 -----------------------------------------------&quot;</span>
<span class="c1">##################################################### 指定默认值 ########################################</span>
<span class="c1">#${PARAMETER:=WORD}</span>

<span class="c1">#${PARAMETER=WORD}</span>

<span class="c1">#这种模式与使用默认值的模式类似，但其区别在于，此种模式不仅扩展WORD，还将WORD赋值给参数PARAMETER，作为PARAMETER的值</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING_hu</span><span class="p">:=Hello World</span><span class="si">}</span>
<span class="nb">echo</span> <span class="nv">$MYSTRING_hu</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING_hu1</span><span class="p">=Hello World</span><span class="si">}</span>
<span class="nb">echo</span> <span class="nv">$MYSTRING_hu1</span>

<span class="nb">echo</span> <span class="s2">&quot;------------------------------------ 华丽的分割线 -----------------------------------------------&quot;</span>
<span class="c1">#################################################### 使用替代值 ###################################</span>

<span class="c1">#${PARAMETER:+WORD}</span>

<span class="c1">#${PARAMETER+WORD}</span>

<span class="c1">#如果参数PARAMETER是未定义的，或其值为空时，这种模式将不扩展任何内容。如果参数PARAMETER是定义的，且其值不为空，这种模式将扩展WORD，而不是扩展为参数PARAMETER的值。</span>

<span class="nv">MYSTRING722</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">:+ NOTE: MYSTRING seems to be set.</span><span class="si">}</span>

<span class="nv">MYSTRING</span><span class="o">=</span><span class="s2">&quot;Hi&quot;</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">MYSTRING</span><span class="p">:+ NOTE: MYSTRING seems to be set.</span><span class="si">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id12">
<h2><a class="toc-backref" href="#id37"><span class="section-number">3.2.3. </span>3 数组</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。数组是相同类型的元素按一定顺序排列的集合。
类似与 C 语言，数组元素的下标由 0
开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于
0。</p>
<section id="id13">
<h3><a class="toc-backref" href="#id38">3.1 数组定义</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>在 Shell 中，用括号来表示数组，数组元素用”空格”符号分割开</p>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id39">3.2 通过元素值集合来创建数组变量</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="c1"># 定义数组</span>
<span class="nv">array</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span><span class="o">)</span>
<span class="c1"># 输出第 1 个数组元素的值</span>
<span class="nb">echo</span> <span class="s2">&quot;the first element is </span><span class="si">${#</span><span class="nv">array</span><span class="p">[0]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出所有元素的值</span>
<span class="nb">echo</span> <span class="s2">&quot;the elements of this array are </span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出数组长度</span>
<span class="nb">echo</span> <span class="s2">&quot;the size of the array is </span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>计算数组的长度</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>${#array[@]}
或者
${#array[*]}

#array表示数组名称，方括号中的@或者*是通配符，表示匹配所有的元素。
</pre></div>
</div>
</section>
<section id="id15">
<h3><a class="toc-backref" href="#id40">3.3 通过键值对定义数组</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="c1"># 定义数组</span>
<span class="nv">array</span><span class="o">=([</span><span class="m">1</span><span class="o">]=</span>one <span class="o">[</span><span class="m">4</span><span class="o">]=</span>four<span class="o">)</span>
<span class="c1"># 输出数组长度</span>
<span class="nb">echo</span> <span class="s2">&quot;the size of the array is  </span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出索引为 4 的元素的值</span>
<span class="nb">echo</span> <span class="s2">&quot;the fourth element is </span><span class="si">${</span><span class="nv">array</span><span class="p">[4]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3><a class="toc-backref" href="#id41">3.4 数组元素读取</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@xuel-tmp-shell ~<span class="o">]</span><span class="c1"># args1=(aa bb cc 1123)</span>
<span class="o">[</span>root@xuel-tmp-shell ~<span class="o">]</span><span class="c1"># echo ${#args1[@]}     #获取数组元素个数</span>
<span class="m">4</span>
<span class="o">[</span>root@xuel-tmp-shell ~<span class="o">]</span><span class="c1"># echo ${args1[0]}</span>
aa
<span class="o">[</span>root@xuel-tmp-shell ~<span class="o">]</span><span class="c1"># echo ${args1[1]}</span>
bb

<span class="o">[</span>root@monitor workspace<span class="o">]</span><span class="c1"># filelist=($(ls))</span>
<span class="o">[</span>root@monitor workspace<span class="o">]</span><span class="c1"># echo ${filelist[*]}</span>
check_url_for.sh check_url_while01.sh check_url_while02.sh func01.sh func02.sh func03.sh urllist.txt

获取数组元素的下标
<span class="o">[</span>root@monitor workspace<span class="o">]</span><span class="c1"># echo ${!filelist[@]}</span>
<span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span>
</pre></div>
</div>
<p>遍历数组</p>
<p>方式1</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="c1"># 定义数组</span>
<span class="nv">array</span><span class="o">=(</span>Mon Tue Wed Thu Fri Sat Sun<span class="o">)</span>
<span class="c1"># 通过下标访问数组</span>
<span class="k">for</span> <span class="o">((</span> <span class="nv">i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> i &lt; <span class="si">${#</span><span class="nv">Ip_array</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> i++ <span class="o">))</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$i</span> <span class="si">${</span><span class="nv">array</span><span class="p">[i]</span><span class="si">}</span>
<span class="k">done</span>
</pre></div>
</div>
<hr class="docutils" />
<p>方式2</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="nv">array</span><span class="o">=(</span>Mon Tue Wed Thu Fri Sat Sun<span class="o">)</span>
<span class="c1"># 获取数组长度</span>
<span class="nv">len</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 通过循环结构遍历数组</span>
<span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="nv">$len</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
   <span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
<p>遍历文件</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>filelist=($(ls));for i in ${!filelist[@]};do echo ${filelist[$i]};done
</pre></div>
</div>
</section>
<section id="id17">
<h3><a class="toc-backref" href="#id42">3.5 以切片方式获取部分数组元素</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1">#在上面的代码中，第4行定义了一个含有7个元素的数组。第6行从下标为2的数组元素开始，截取其中的4个元素。</span>
<span class="nv">linux</span><span class="o">=(</span><span class="s2">&quot;Debian&quot;</span> <span class="s2">&quot;RedHat&quot;</span> <span class="s2">&quot;Ubuntu&quot;</span> <span class="s2">&quot;Suse&quot;</span> <span class="s2">&quot;Fedora&quot;</span> <span class="s2">&quot;UTS&quot;</span> <span class="s2">&quot;CentOS&quot;</span><span class="o">)</span>
<span class="c1"># 数组切片</span>
<span class="nv">var</span><span class="o">=</span><span class="si">${</span><span class="nv">linux</span><span class="p">[@]:</span><span class="nv">2</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var</span><span class="s2">&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@linux chapter7<span class="o">]</span><span class="c1"># ./ex7-19.sh</span>
Ubuntu Suse Fedora UTS
</pre></div>
</div>
<p>演示将切片结果以数组形式保存的方法。本例将切片的结果赋给了一个新的数组变量，然后输出新的数组的长度，最后通过循环输出所有的数组元素</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="c1"># 定义数组</span>
<span class="nv">linux</span><span class="o">=(</span><span class="s2">&quot;Debian&quot;</span> <span class="s2">&quot;RedHat&quot;</span> <span class="s2">&quot;Ubuntu&quot;</span> <span class="s2">&quot;Suse&quot;</span> <span class="s2">&quot;Fedora&quot;</span> <span class="s2">&quot;UTS&quot;</span> <span class="s2">&quot;CentOS&quot;</span><span class="o">)</span>

<span class="c1"># 切片</span>
<span class="nv">array</span><span class="o">=(</span><span class="si">${</span><span class="nv">linux</span><span class="p">[@]:</span><span class="nv">2</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span><span class="o">)</span>
<span class="c1"># 获取新的数组的长度</span>
<span class="nv">length</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出数组长度</span>
<span class="nb">echo</span> <span class="s2">&quot;the length of new array is </span><span class="nv">$length</span><span class="s2">&quot;</span>
<span class="c1"># 通过循环输出各个元素</span>
<span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="nv">$length</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
   <span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
<section id="declare">
<h3><a class="toc-backref" href="#id43">3.6 通过declare语句定义关联数组</a><a class="headerlink" href="#declare" title="Permalink to this headline">¶</a></h3>
<p>其基本语法如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">declare</span> <span class="o">-</span><span class="n">a</span> <span class="n">array</span>
<span class="n">declare</span> <span class="o">-</span><span class="n">A</span> <span class="n">dic</span>
</pre></div>
</div>
<p>在上面的语法中，-a选项表示后面定义的是一个数组，其名称为array。</p>
<section id="id18">
<h4>关联数组 —&gt; shell中的字典<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># -A 举例，字典类型的关联数组
declare -A dic
dic=([no1]=&quot;hujianli1&quot; [no2]=&quot;hujianli2&quot; [no3]=&quot;hujianli3&quot;)

echo ${dic[no3]}        #hujianli3
#打印所有的key
echo ${!dic[*]}         # no3 no2 no1

#打印所有的value
echo ${dic[*]}          # hujianli3 hujianli2 hujianli1

# 变量key和value
$ for i in ${!dic[*]}; do echo ${i}:${dic[$i]}; done
no3:hujianli3
no2:hujianli2
no1:hujianli1
</pre></div>
</div>
<p>关联数组必须以大写的declare -A命令来进行声明</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">declare</span> -A array_example
$ <span class="nv">array_example</span><span class="o">=([</span><span class="m">0</span><span class="o">]=</span>centos7
                 <span class="o">[</span><span class="m">1</span><span class="o">]=</span>centos6
                 <span class="o">[</span><span class="m">2</span><span class="o">]=</span>ubuntu
                 <span class="o">[</span><span class="m">3</span><span class="o">]=</span>redhat
                 <span class="o">[</span><span class="m">4</span><span class="o">]=</span>suse
                 <span class="o">[</span><span class="m">5</span><span class="o">]=</span>windows<span class="o">)</span>

$ <span class="nb">echo</span> <span class="si">${</span><span class="nv">array_example</span><span class="p">[3]</span><span class="si">}</span>
redhat

$ <span class="nb">echo</span> <span class="si">${</span><span class="nv">array_example</span><span class="p">[*]</span><span class="si">}</span>
centos7 centos6 ubuntu redhat suse windows

$ <span class="nb">echo</span> <span class="si">${</span><span class="nv">array_example</span><span class="p">[@]</span><span class="si">}</span>
centos7 centos6 ubuntu redhat suse windows

$ <span class="nb">echo</span> <span class="si">${#</span><span class="nv">array_example</span><span class="p">[@]</span><span class="si">}</span>
<span class="m">6</span>

<span class="c1"># 显示所有的index下标</span>
$ <span class="nb">echo</span> <span class="si">${</span><span class="p">!array_example[*]</span><span class="si">}</span>
<span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
</pre></div>
</div>
<p>举例说明</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">declare</span> -A <span class="nv">projects</span><span class="o">=(</span>
    <span class="o">[</span>test_chatsrv-frontend<span class="o">]=</span><span class="s2">&quot;172.20.20.3&quot;</span>
    <span class="o">[</span>test_chatsrv-core<span class="o">]=</span><span class="s2">&quot;172.20.20.5&quot;</span>
    <span class="o">[</span>test_chatsrv-storage<span class="o">]=</span><span class="s2">&quot;172.20.20.5&quot;</span>
    <span class="o">[</span>test_chatsrv-push<span class="o">]=</span><span class="s2">&quot;172.20.20.5&quot;</span>
<span class="o">)</span>

<span class="nv">token</span><span class="o">=</span><span class="s2">&quot;xxxxxxxxx&quot;</span>

<span class="k">for</span> project <span class="k">in</span> <span class="si">${</span><span class="p">!projects[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
    <span class="nv">client</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">projects</span><span class="p">[</span><span class="si">${</span><span class="nv">project</span><span class="si">}</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    curl -w <span class="s1">&#39;\n&#39;</span> <span class="s1">&#39;http://deploy.ixiaochuan.cn/deploy&#39;</span> -H <span class="s2">&quot;Cookie: remember_token=</span><span class="si">${</span><span class="nv">token</span><span class="si">}</span><span class="s2">;&quot;</span> --data <span class="s2">&quot;operation=update&amp;project=</span><span class="si">${</span><span class="nv">project</span><span class="si">}</span><span class="s2">&amp;client=</span><span class="si">${</span><span class="nv">client</span><span class="si">}</span><span class="s2">&quot;</span> --compressed --silent
<span class="k">done</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1"># @Author: hujianli</span>
<span class="c1"># @Date:   2018-11-18 15:03:18</span>
<span class="c1"># @Last Modified by:   hujianli</span>
<span class="c1"># @Last Modified time: 2018-11-18 15:15:13</span>

: <span class="s">&lt;&lt;EOF</span>
<span class="s">符号*是把原数组中的所有元素（除了用于区别元素的分隔符，通常是空格）当成一个元素复制到新数组中，生的新数组只有一个元素</span>
<span class="s">符号@的含义是把原数组的内容复制到一个新数组中，生成的新数组和原来的是一样的</span>
<span class="s">EOF</span>

<span class="nb">declare</span> -a      <span class="c1">#显示当前所有的数组</span>
<span class="nb">declare</span> -ar <span class="nv">BASH_VERSION</span><span class="o">=</span><span class="s1">&#39;([0]=&quot;2&quot;</span>
<span class="s1">                           [1]=&quot;05b&quot;</span>
<span class="s1">                           [2]=&quot;0&quot;</span>
<span class="s1">                           [3]=&quot;1&quot;</span>
<span class="s1">                           [4]=&quot;release&quot;</span>
<span class="s1">                           [5]=&quot;i386-redhat-linux-gnu&quot;)&#39;</span>
<span class="nb">declare</span> -a <span class="nv">DIRSTACK</span><span class="o">=</span><span class="s1">&#39;()&#39;</span>
<span class="nb">declare</span> -a <span class="nv">GROUPS</span><span class="o">=</span><span class="s1">&#39;()&#39;</span>
<span class="nb">declare</span> -a <span class="nv">PIPESTATUS</span><span class="o">=</span><span class="s1">&#39;([0]=&quot;0&quot;)&#39;</span>
<span class="nb">declare</span> -a <span class="nv">student</span><span class="o">=</span><span class="s1">&#39;([0]=&quot;张三&quot;</span>
<span class="s1">    [1]=&quot;李四&quot;</span>
<span class="s1">    [2]=&quot;王小二&quot;</span>
<span class="s1">    [3]=&quot;李晓明&quot;</span>
<span class="s1">    [4]=&quot;张四宝&quot;)&#39;</span>
<span class="nb">declare</span> -a <span class="nv">score</span><span class="o">=</span><span class="s1">&#39;([0]=&quot;66&quot;</span>
<span class="s1">    [1]=&quot;70&quot;</span>
<span class="s1">    [2]=&quot;80&quot;</span>
<span class="s1">    [3]=&quot;90&quot;</span>
<span class="s1">    [4]=&quot;98&quot;)&#39;</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">student</span><span class="p">[@]</span><span class="si">}</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">student</span><span class="p">[*]</span><span class="si">}</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1"># @Author: hujianli</span>
<span class="c1"># @Date:   2018-11-18 13:59:12</span>
<span class="c1"># @Last Modified by:   hujianli</span>
<span class="c1"># @Last Modified time: 2018-11-18 14:04:47</span>
<span class="nv">student</span><span class="o">=(</span><span class="s2">&quot;张三&quot;</span> <span class="s2">&quot;李四&quot;</span> <span class="s2">&quot;王五&quot;</span> <span class="s2">&quot;李晓明&quot;</span> <span class="s2">&quot;胡建力&quot;</span><span class="o">)</span>
<span class="nv">score</span><span class="o">=(</span><span class="m">66</span> <span class="m">70</span> <span class="m">80</span> <span class="m">84</span> <span class="m">99</span><span class="o">)</span>

<span class="nv">N</span><span class="o">=</span><span class="si">${#</span><span class="nv">student</span><span class="p">[*]</span><span class="si">}</span>        <span class="c1">#计算数组的个数总和,赋值给变量N</span>
<span class="nb">echo</span> <span class="s2">&quot;学生总数为:</span><span class="nv">$N</span><span class="s2">&quot;</span>
<span class="nv">i</span><span class="o">=</span><span class="m">0</span>
<span class="k">while</span> <span class="o">[[</span> <span class="nv">$i</span> -lt <span class="nv">$N</span> <span class="o">]]</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> -e <span class="s2">&quot;\tstudent </span>$<span class="s2">[i]的考试成绩为:</span><span class="si">${</span><span class="nv">score</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="nv">i</span><span class="o">=</span><span class="k">$((</span><span class="nv">$i</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
</section>
<section id="id19">
<h3><a class="toc-backref" href="#id44">3.7 在数组末尾追加新元素</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>在Shell中，向已有的数组末尾追加新的元素非常方便。在通过索引为数组元素赋值时，如果指定的索引不存在，则Shell会自动添加一个新的元素，并且将指定的值赋给该元素。</p>
<p>演示如何在数组末尾追加新的数组元素</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># 定义数组</span>
<span class="nv">array</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span><span class="o">)</span>
<span class="c1"># 输出数组</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 向数组末尾追加元素</span>
array<span class="o">[</span><span class="m">2</span><span class="o">]=</span><span class="m">3</span>
array<span class="o">[</span><span class="m">3</span><span class="o">]=</span><span class="m">4</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>演示向关联数组追加新元素的方法</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># 定义数组</span>
<span class="nb">declare</span> -A array
<span class="c1"># 初始化数组</span>
<span class="nv">array</span><span class="o">=([</span>a<span class="o">]=</span>a <span class="o">[</span>b<span class="o">]=</span>b<span class="o">)</span>

<span class="nb">echo</span> <span class="s2">&quot;the old elements are </span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 向数组追加元素</span>
array<span class="o">[</span>c<span class="o">]=</span>c
<span class="nb">echo</span> <span class="s2">&quot;the new elements are </span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="id20">
<h3><a class="toc-backref" href="#id45">3.8 通过循环为数组赋值</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># 通过循环为数组赋值</span>
<span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">1</span>..10<span class="o">}</span>
<span class="k">do</span>
   array<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="nv">$i</span>
<span class="k">done</span>
<span class="c1"># 输出元素的值</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="id21">
<h3><a class="toc-backref" href="#id46">3.9 数组元素的替换</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p>数组元素替换的基本语法如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>${array[@|*]/pattern/replacement}
</pre></div>
</div>
<p>演示如何对数组进行替换，以及如何将替换的结果赋给一个新的数组变量。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># 定义数组</span>
<span class="nv">a</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span><span class="o">)</span>
<span class="c1"># 输出替换结果</span>
<span class="nb">echo</span> <span class="s2">&quot;the result is </span><span class="si">${</span><span class="nv">a</span><span class="p">[@]/3/100</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出原始数组</span>
<span class="nb">echo</span> <span class="s2">&quot;the old array is </span><span class="si">${</span><span class="nv">a</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 将替换结果赋给一个数组变量</span>
<span class="nv">a</span><span class="o">=(</span><span class="si">${</span><span class="nv">a</span><span class="p">[@]/3/100</span><span class="si">}</span><span class="o">)</span>
<span class="c1"># 输出新的数组变量的值</span>
<span class="nb">echo</span> <span class="s2">&quot;the new array is </span><span class="si">${</span><span class="nv">a</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>该程序的执行结果如下：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@linux chapter7<span class="o">]</span><span class="c1"># ./ex7-23.sh</span>
the result is <span class="m">1</span> <span class="m">2</span> <span class="m">100</span> <span class="m">4</span> <span class="m">5</span>
the old array is <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
the new array is <span class="m">1</span> <span class="m">2</span> <span class="m">100</span> <span class="m">4</span> <span class="m">5</span>
</pre></div>
</div>
</section>
<section id="id22">
<h3><a class="toc-backref" href="#id47">3.10 删除数组</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>与删除其他的Shell变量一样，用户可以使用unset命令来删除某个数组元素，其基本语法如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unset</span> <span class="n">array</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>删除数组中的元素</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="nv">linux</span><span class="o">=(</span><span class="s2">&quot;Debian&quot;</span> <span class="s2">&quot;RedHat&quot;</span> <span class="s2">&quot;Ubuntu&quot;</span> <span class="s2">&quot;Suse&quot;</span> <span class="s2">&quot;Fedora&quot;</span> <span class="s2">&quot;UTS&quot;</span> <span class="s2">&quot;CentOS&quot;</span><span class="o">)</span>
<span class="c1"># 输出原始数组长度</span>
<span class="nb">echo</span> <span class="s2">&quot;the length of original array is </span><span class="si">${#</span><span class="nv">linux</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出数组的原始值</span>
<span class="nb">echo</span> <span class="s2">&quot;the old array is </span><span class="si">${</span><span class="nv">linux</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 删除下标为 3 的元素</span>
<span class="nb">unset</span> linux<span class="o">[</span><span class="m">3</span><span class="o">]</span>
 输出新的数组的长度
<span class="nb">echo</span> <span class="s2">&quot;the length of new array is </span><span class="si">${#</span><span class="nv">linux</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出新的数组的值</span>
<span class="nb">echo</span> <span class="s2">&quot;the new array is </span><span class="si">${</span><span class="nv">linux</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><strong>删除整个数组</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="nv">linux</span><span class="o">=(</span><span class="s2">&quot;Debian&quot;</span> <span class="s2">&quot;RedHat&quot;</span> <span class="s2">&quot;Ubuntu&quot;</span> <span class="s2">&quot;Suse&quot;</span> <span class="s2">&quot;Fedora&quot;</span> <span class="s2">&quot;UTS&quot;</span> <span class="s2">&quot;CentOS&quot;</span><span class="o">)</span>
<span class="c1"># 删除整个数组</span>
<span class="nb">unset</span> linux
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">linux</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="id23">
<h3><a class="toc-backref" href="#id48">3.11 数组的其它操作</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<p><strong>复制数组</strong></p>
<p>所谓复制数组，是指创建一个已经存在的数组的副本。也就是将一个数组的内容全部存储到另外一个新的数组中。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>在Shell中，用户可以通过以下语法来实现数组的复制：
newarray=(&quot;${array[@]}&quot;)
</pre></div>
</div>
<p><strong>连接数组</strong></p>
<p>连接数组是指将2个数组的数组元素连接在一起，变成一个大的数组。新的数组依次包含2个数组的所有的元素。数组连接的语法如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s2">&quot;$array1[@]}&quot;</span> <span class="s2">&quot;$</span><span class="si">{array2[@]}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>示例</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>

<span class="c1"># 定义 2 个数组</span>
<span class="nv">linux</span><span class="o">=(</span><span class="s2">&quot;Debian&quot;</span> <span class="s2">&quot;RedHat&quot;</span> <span class="s2">&quot;Ubuntu&quot;</span> <span class="s2">&quot;Suse&quot;</span> <span class="s2">&quot;Fedora&quot;</span> <span class="s2">&quot;UTS&quot;</span> <span class="s2">&quot;CentOS&quot;</span><span class="o">)</span>
<span class="nv">shell</span><span class="o">=(</span><span class="s2">&quot;bash&quot;</span> <span class="s2">&quot;csh&quot;</span> <span class="s2">&quot;ksh&quot;</span> <span class="s2">&quot;rsh&quot;</span> <span class="s2">&quot;sh&quot;</span> <span class="s2">&quot;rc&quot;</span> <span class="s2">&quot;tcsh&quot;</span><span class="o">)</span>

<span class="c1"># 连接数组</span>
<span class="nv">linuxshell</span><span class="o">=(</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">linux</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">shell</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>

<span class="c1"># 输出合并后的数组</span>
<span class="nb">echo</span> <span class="s2">&quot;the new array is </span><span class="si">${</span><span class="nv">linuxshell</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># 输出新的数组的长度</span>
<span class="nb">echo</span> <span class="s2">&quot;the length of new array is </span><span class="si">${#</span><span class="nv">linuxshell</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><strong>加载文件内容到数组</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># 加载文件内容</span>
<span class="nv">content</span><span class="o">=(</span><span class="sb">`</span>cat <span class="s2">&quot;demo.txt&quot;</span><span class="sb">`</span><span class="o">)</span>
<span class="c1"># 通过循环输出数组内容</span>
<span class="k">for</span> s <span class="k">in</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">content</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">do</span>
   <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$s</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
</section>
<section id="id24">
<h2><a class="toc-backref" href="#id49"><span class="section-number">3.2.4. </span>4 字符显示颜色</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>字体颜色           字体背景颜色            显示方式
30：黑                40：黑
31：红                41：深红              0：终端默认设置
32：绿                42：绿                   1：高亮显示
33：黄                43：黄色              4：下划线
34：蓝色            44：蓝色             5：闪烁
35：紫色            45：紫色             7：反白显示
36：深绿            46：深绿             8：隐藏
37：白色            47：白色
格式：
\033[1;31;40m|  # 1 是显示方式，可选。31 是字体颜色。40m 是字体背景颜色。
\033[0m | # 恢复终端默认颜色，即取消颜色设置。
</pre></div>
</div>
<ul class="simple">
<li><p>显示方式</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">{</span><span class="mf">1.</span><span class="o">.</span><span class="mi">8</span><span class="p">};</span><span class="n">do</span> <span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[$i;31;40m hello world </span><span class="se">\033</span><span class="s2">[0m&quot;</span><span class="p">;</span><span class="n">done</span>
</pre></div>
</div>
<ul class="simple">
<li><p>字体颜色</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">{</span><span class="mf">30.</span><span class="o">.</span><span class="mi">37</span><span class="p">};</span><span class="n">do</span> <span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[$i;40m hello world </span><span class="se">\033</span><span class="s2">[0m&quot;</span><span class="p">;</span><span class="n">done</span>
</pre></div>
</div>
<ul class="simple">
<li><p>背景颜色</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">{</span><span class="mf">40.</span><span class="o">.</span><span class="mi">47</span><span class="p">};</span><span class="n">do</span> <span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[47;$</span><span class="si">{i}</span><span class="s2">m hello world! </span><span class="se">\033</span><span class="s2">[0m&quot;</span><span class="p">;</span><span class="n">done</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/usr/bin/env bash
#usage:xxx
#scripts_name:xxx.sh
# 文本颜色是由对应的色彩码来描述的。其中包括：重置=0，黑色=30，红色=31，绿色=32，
#  黄色=33，蓝色=34，洋红=35，青色=36，白色=37。


echo -e &quot;\e[1;31m This is red text \e[0m&quot;
echo -e &quot;\e[1;32m This is green text \e[0m&quot;
echo -e &quot;\e[1;33m This is yellow text \e[0m&quot;
echo -e &quot;\e[1;34m This is blue text \e[0m&quot;
echo -e &quot;\e[1;35m This is Magenta text \e[0m&quot;
echo -e &quot;\e[1;36m This is 青色 text \e[0m&quot;
echo -e &quot;\e[1;37m This is white text \e[0m&quot;
echo
echo

#对于彩色背景，经常使用的颜色码是：重置=0，黑色=40，红色=41，绿色=42，黄色=43，
# 蓝色=44，洋红=45，青色=46，白色=47。
echo -e &quot;\e[1;41m Green Background \e[0m&quot;
echo -e &quot;\e[1;42m Green Background \e[0m&quot;
echo -e &quot;\e[1;43m Green Background \e[0m&quot;
echo -e &quot;\e[1;44m Green Background \e[0m&quot;
echo -e &quot;\e[1;45m Green Background \e[0m&quot;
echo -e &quot;\e[1;46m Green Background \e[0m&quot;
echo -e &quot;\e[1;47m Green Background \e[0m&quot;


#定义一个颜色的函数
echo_color (){
    local color=$1
    local info=$2
    case &quot;$color&quot; in
    red)
        echo -e &quot;\e[1;31m ${info} \e[0m&quot;
       ;;
    green)
        echo -e &quot;\e[1;32m ${info} \e[0m&quot;
       ;;
    yellow)
        echo -e &quot;\e[1;33m ${info} \e[0m&quot;
       ;;
    blue)
        echo -e &quot;\e[1;34m ${info} \e[0m&quot;
       ;;
    Magenta)
        echo -e &quot;\e[1;35m ${info} \e[0m&quot;
    ;;
    cyan-blue)
        echo -e &quot;\e[1;36m ${info} \e[0m&quot;
    ;;
    esac

}


echo_color red &quot;哈哈哈哈哈哈哈&quot;
echo_color green &quot;哈哈哈哈哈哈哈&quot;
echo_color yellow &quot;哈哈哈哈哈哈哈&quot;
echo_color blue &quot;哈哈哈哈哈哈&quot;
echo_color Magenta &quot;哈哈哈哈哈哈&quot;
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="btn btn-neutral float-left" title="3.1. 1 基础知识" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="03.%E8%BF%90%E7%AE%97%E7%AC%A6.html" class="btn btn-neutral float-right" title="3.3. 3 运算符" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, huxiaojian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>