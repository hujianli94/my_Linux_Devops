<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.2. HCNA网络技术实验指南 &mdash; 运维开发修炼之路</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.3. 华为设备常用命令" href="03.%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" />
    <link rel="prev" title="1.1. HCNA基础知识" href="01.HCNA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> 小健_Linux-shell-Devops_Blog
            <img src="../../_static/devops_photo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Cloud_migration/index.html">Cloud_migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DevOps/index.html">DevOps和自动化运维实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Github/index.html">Github入门到实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Jenkins/index.html">Jenkins持续化集成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../KVM/index.html">KVM实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Linux_Cluster/index.html">Linux服务构建实战</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Linux/index.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Mysql/index.html">Mysql王者之路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Openstack/index.html">Openstack实践</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other/index.html">Other</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Network_route_switch</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">1. 华为设备数通玩转</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01.HCNA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html">1.1. HCNA基础知识</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.2. HCNA网络技术实验指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vrp">1.2.1. 熟悉VRP基本操作</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ip">1.2.2. 熟悉常用的IP 相关命令</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">1.2.3. 交换机基础配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan">1.2.4. VLAN配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gvrp">1.2.5. GVRP配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">1.2.6. VLAN间路由</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ip-acl">1.2.7. IP安全配置(ACL)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nat">1.2.8. NAT的配置</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="03.%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html">1.3. 华为设备常用命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="04.%E5%B0%8F%E5%9E%8B%E5%9B%AD%E5%8C%BA%E7%BB%84%E7%BD%91%E5%9C%BA%E6%99%AF.html">1.4. 小型园区组网场景</a></li>
<li class="toctree-l3"><a class="reference internal" href="05.%E4%B8%AD%E5%B0%8F%E5%9B%AD%E5%8C%BA%E7%BB%84%E7%BD%91%E5%9C%BA%E6%99%AF.html">1.5. 中小园区组网场景</a></li>
<li class="toctree-l3"><a class="reference internal" href="06.%E7%BB%BC%E5%90%88%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B.html">1.6. 综合配置案例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03.%E6%80%9D%E7%A7%91%E8%AE%BE%E5%A4%87%E6%95%B0%E9%80%9A%E5%A4%8D%E4%B9%A0/index.html">2. 思科设备数通复习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.H3C%E6%95%B0%E9%80%9A%E7%8E%A9%E8%BD%AC/index.html">3. H3C设备数通</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">小健_Linux-shell-Devops_Blog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Network_route_switch</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">1. </span>华为设备数通玩转</a> &raquo;</li>
      <li><span class="section-number">1.2. </span>HCNA网络技术实验指南</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Network_route_switch/01.华为设备数通玩转/02.HCNA实验举例.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hcna" id="id18">HCNA网络技术实验指南</a></p>
<ul>
<li><p><a class="reference internal" href="#vrp" id="id19">熟悉VRP基本操作</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id20">1．命令视图切换</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id21">2．命令行帮助</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id22">3．快捷键使用</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id23">4．修改路由器名称</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id24">5．设置路由器时钟</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id25">6．设置标题信息</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id26">7．查看路由器基本信息</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ip" id="id27">熟悉常用的IP 相关命令</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id28">交换机基础配置</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id29">以太网接口和配置</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id30">1.配置手工模式的链路聚合（关闭自协商、接口速率为100,，全双工）</a></p></li>
<li><p><a class="reference internal" href="#lacp" id="id31">2.配置静态LACP</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#vlan" id="id32">VLAN配置</a></p>
<ul>
<li><p><a class="reference internal" href="#id11" id="id33">配置文件</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gvrp" id="id34">GVRP配置</a></p>
<ul>
<li><p><a class="reference internal" href="#id12" id="id35">配置文件</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id36">修改交换机接口的注册模式</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id15" id="id37">VLAN间路由</a></p>
<ul>
<li><p><a class="reference internal" href="#id16" id="id38">掌握知识</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ip-acl" id="id39">IP安全配置(ACL)</a></p></li>
<li><p><a class="reference internal" href="#nat" id="id40">NAT的配置</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="hcna">
<h1><a class="toc-backref" href="#id18"><span class="section-number">1.2. </span>HCNA网络技术实验指南</a><a class="headerlink" href="#hcna" title="Permalink to this headline">¶</a></h1>
<section id="vrp">
<h2><a class="toc-backref" href="#id19"><span class="section-number">1.2.1. </span>熟悉VRP基本操作</a><a class="headerlink" href="#vrp" title="Permalink to this headline">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id20">1．命令视图切换</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>使用display version 命令显示系统软件版本及硬件等信息。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Huawei</span><span class="o">&gt;</span><span class="n">display</span> <span class="n">version</span>
</pre></div>
</div>
<p>用户视图下使用 system-view 命令可以切换到系统视图</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Huawei</span><span class="o">&gt;</span><span class="n">system</span><span class="o">-</span><span class="n">view</span>
<span class="n">Enter</span> <span class="n">system</span> <span class="n">view</span><span class="p">,</span> <span class="k">return</span> <span class="n">user</span> <span class="n">view</span> <span class="k">with</span> <span class="n">Ctrl</span><span class="o">+</span><span class="n">Z</span>
<span class="p">[</span><span class="n">Huawei</span><span class="p">]</span><span class="n">quit</span>
<span class="o">&lt;</span><span class="n">Huawei</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>进入接口视图</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Huawei</span><span class="p">]</span><span class="n">interface</span> <span class="n">GigabitEthernet</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
<span class="p">[</span><span class="n">Huawei</span><span class="o">-</span><span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="n">Huawei</span><span class="o">-</span><span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span><span class="n">ip</span> <span class="n">address</span> <span class="mf">10.1</span><span class="o">.</span><span class="mf">1.1</span> <span class="mi">24</span>
</pre></div>
</div>
<p>return命令可以使用户从任意非用户视图退回到用户视图，也可以用组合快捷键&lt;Ctrl+Z&gt;完成</p>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id21">2．命令行帮助</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>（1）完全帮助：在任意命令视图下，输入“？”获取该命令视图下所有的命令及其简单描述。</p>
<p>（2）部分帮助：输入一字符串，其后紧接“？”，列出以该字符串开头的所有关键字。</p>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id22">3．快捷键使用</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>■退格键&lt;BackSpace&gt;表示删除光标位置的前一个字符；

■左光标键&lt;←&gt;或&lt;Ctrl+B&gt;表示光标向左移动一个字符位置；

■右光标键&lt;→&gt;或&lt;Ctrl+F&gt;表示光标向右移动一个字符位置；

■删除键&lt;Delete&gt;表示删除光标位置字符；

■上下光标键&lt;↑&gt;、&lt;↓&gt;表示显示历史命令；

■当用户输入不完整的关键字后按下&lt;Tab&gt;键，系统自动执行部分帮助，将命令补全。比如输入“dis”后，按&lt;Tab&gt;键可以将命令补全为“display”。
</pre></div>
</div>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id23">4．修改路由器名称</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Huawei</span><span class="p">]</span><span class="n">sysname</span> <span class="n">R1</span>
<span class="p">[</span><span class="n">R1</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id24">5．设置路由器时钟</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>例如：在用户视图下，使用clock datetime 命令修改系统日期和时间为2011 年9 月15日12时。

&lt;R1&gt;clock datetime 12:00:00 2011-09-15

例如：在用户视图下，使用clock timezone 命令，设置所在的时区为北京。

&lt;R1&gt;clock timezone BJ add 08:00:00
</pre></div>
</div>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id25">6．设置标题信息</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">header</span> <span class="n">login</span> <span class="n">information</span> <span class="s2">&quot;hello&quot;</span>
<span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">header</span> <span class="n">shell</span> <span class="n">information</span> <span class="s2">&quot;Welcome to Huawei certification lab&quot;</span>
<span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">quit</span>
<span class="o">&lt;</span><span class="n">R1</span><span class="o">&gt;</span><span class="n">quit</span>

  <span class="n">Configuration</span> <span class="n">console</span> <span class="n">exit</span><span class="p">,</span> <span class="n">please</span> <span class="n">press</span> <span class="nb">any</span> <span class="n">key</span> <span class="n">to</span> <span class="n">log</span> <span class="n">on</span>

<span class="n">Welcome</span> <span class="n">to</span> <span class="n">Huawei</span> <span class="n">certification</span> <span class="n">lab</span>
<span class="o">&lt;</span><span class="n">R1</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3><a class="toc-backref" href="#id26">7．查看路由器基本信息</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">R1</span><span class="o">&gt;</span><span class="n">display</span> <span class="n">version</span>

<span class="c1">#使用display current-configuration命令查看路由器当前配置。</span>
<span class="o">&lt;</span><span class="n">R1</span><span class="o">&gt;</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>

<span class="c1">#使用display interface GigabitEthernet 0/0/0命令查看路由器GE 0/0/0接口的状态信息。</span>
<span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">display</span> <span class="n">interface</span> <span class="n">GigabitEthernet</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>

<span class="c1">#查看IPv4路由表的信息。</span>
<span class="o">&lt;</span><span class="n">R1</span><span class="o">&gt;</span><span class="n">display</span> <span class="n">ip</span> <span class="n">routing</span><span class="o">-</span><span class="n">table</span>
</pre></div>
</div>
</section>
</section>
<section id="ip">
<h2><a class="toc-backref" href="#id27"><span class="section-number">1.2.2. </span>熟悉常用的IP 相关命令</a><a class="headerlink" href="#ip" title="Permalink to this headline">¶</a></h2>
<p>实验拓扑</p>
<p>常用的IP相关命令的拓扑如图</p>
<p><img alt="image0" src="../../_images/hcna-IP0001.png" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">display</span> <span class="n">ip</span> <span class="n">interface</span> <span class="n">brief</span>
<span class="o">*</span><span class="n">down</span><span class="p">:</span> <span class="n">administratively</span> <span class="n">down</span>
<span class="o">^</span><span class="n">down</span><span class="p">:</span> <span class="n">standby</span>
<span class="p">(</span><span class="n">l</span><span class="p">):</span> <span class="n">loopback</span>
<span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="n">spoofing</span>
<span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">interface</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">UP</span> <span class="ow">in</span> <span class="n">Physical</span> <span class="ow">is</span> <span class="mi">3</span>
<span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">interface</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">DOWN</span> <span class="ow">in</span> <span class="n">Physical</span> <span class="ow">is</span> <span class="mi">1</span>
<span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">interface</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">UP</span> <span class="ow">in</span> <span class="n">Protocol</span> <span class="ow">is</span> <span class="mi">3</span>
<span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">interface</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">DOWN</span> <span class="ow">in</span> <span class="n">Protocol</span> <span class="ow">is</span> <span class="mi">1</span>

<span class="n">Interface</span>                         <span class="n">IP</span> <span class="n">Address</span><span class="o">/</span><span class="n">Mask</span>      <span class="n">Physical</span>   <span class="n">Protocol</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>              <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.254</span><span class="o">/</span><span class="mi">24</span>        <span class="n">up</span>         <span class="n">up</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>              <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.254</span><span class="o">/</span><span class="mi">24</span>        <span class="n">up</span>         <span class="n">up</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span>              <span class="n">unassigned</span>           <span class="n">down</span>       <span class="n">down</span>
<span class="n">NULL0</span>                             <span class="n">unassigned</span>           <span class="n">up</span>         <span class="n">up</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">display</span> <span class="n">ip</span> <span class="n">routing</span><span class="o">-</span><span class="n">table</span>
<span class="n">Route</span> <span class="n">Flags</span><span class="p">:</span> <span class="n">R</span> <span class="o">-</span> <span class="n">relay</span><span class="p">,</span> <span class="n">D</span> <span class="o">-</span> <span class="n">download</span> <span class="n">to</span> <span class="n">fib</span>
<span class="o">------------------------------------------------------------------------------</span>
<span class="n">Routing</span> <span class="n">Tables</span><span class="p">:</span> <span class="n">Public</span>
         <span class="n">Destinations</span> <span class="p">:</span> <span class="mi">10</span>       <span class="n">Routes</span> <span class="p">:</span> <span class="mi">10</span>

<span class="n">Destination</span><span class="o">/</span><span class="n">Mask</span>    <span class="n">Proto</span>   <span class="n">Pre</span>  <span class="n">Cost</span>      <span class="n">Flags</span> <span class="n">NextHop</span>         <span class="n">Interface</span>

       <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.254</span>      <span class="n">GigabitEthernet</span>
<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet</span>
<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet</span>
<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.254</span>      <span class="n">GigabitEthernet</span>
<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet</span>
<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet</span>
<span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span>   <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
<span class="mf">127.255</span><span class="o">.</span><span class="mf">255.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
<span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">ping</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.1</span>
  <span class="n">PING</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.1</span><span class="p">:</span> <span class="mi">56</span>  <span class="n">data</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">press</span> <span class="n">CTRL_C</span> <span class="n">to</span> <span class="k">break</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.1</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">128</span> <span class="n">time</span><span class="o">=</span><span class="mi">120</span> <span class="n">ms</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.1</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">2</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">128</span> <span class="n">time</span><span class="o">=</span><span class="mi">50</span>


<span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">ping</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span>
  <span class="n">PING</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span><span class="p">:</span> <span class="mi">56</span>  <span class="n">data</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">press</span> <span class="n">CTRL_C</span> <span class="n">to</span> <span class="k">break</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">128</span> <span class="n">time</span><span class="o">=</span><span class="mi">90</span> <span class="n">ms</span>
</pre></div>
</div>
<p>在PC1上ping PC2，开始抓包查看数据包信息</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PC</span><span class="o">&gt;</span><span class="n">ping</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span>

<span class="n">Ping</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span><span class="p">:</span> <span class="mi">32</span> <span class="n">data</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">Press</span> <span class="n">Ctrl_C</span> <span class="n">to</span> <span class="k">break</span>
<span class="n">From</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">32</span> <span class="n">seq</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">127</span> <span class="n">time</span><span class="o">=</span><span class="mi">63</span> <span class="n">ms</span>
</pre></div>
</div>
<p><img alt="image1" src="../../_images/networ-ip0002.png" /></p>
</section>
<section id="id8">
<h2><a class="toc-backref" href="#id28"><span class="section-number">1.2.3. </span>交换机基础配置</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<section id="id9">
<h3><a class="toc-backref" href="#id29">以太网接口和配置</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span><span class="n">掌握接口速率和双工模式的配置方法</span>

<span class="mf">2.</span><span class="n">掌握实验手段模式配置链路聚合的方法</span>

<span class="mf">3.</span><span class="n">掌握实验静态LACP模式配置链路聚合的方法</span>
</pre></div>
</div>
<p>拓扑图</p>
<p><img alt="image2" src="../../_images/network-sw0001.png" /></p>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id30">1.配置手工模式的链路聚合（关闭自协商、接口速率为100,，全双工）</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>方式一</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">sw1</span><span class="p">]</span><span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk</span> <span class="mi">1</span>
<span class="p">[</span><span class="n">sw1</span><span class="p">]</span><span class="n">interface</span> <span class="n">GigabitEthernet</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
<span class="p">[</span><span class="n">sw1</span><span class="o">-</span><span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">]</span><span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>方式二</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#创建Eth-Trunk 1，将接口0/0/9 - 0/0/10一次加入Eth-Trunk 1中</span>
<span class="p">[</span><span class="n">sw1</span><span class="p">]</span><span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk</span> <span class="mi">1</span>
<span class="p">[</span><span class="n">sw1</span><span class="o">-</span><span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span><span class="p">]</span><span class="n">trunkport</span> <span class="n">GigabitEthernet</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span> <span class="n">to</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>查看Eth-trunk的配置结果</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span><span class="s1">&#39;s state information is:</span>
<span class="n">WorkingMode</span><span class="p">:</span> <span class="n">NORMAL</span>         <span class="n">Hash</span> <span class="n">arithmetic</span><span class="p">:</span> <span class="n">According</span> <span class="n">to</span> <span class="n">SIP</span><span class="o">-</span><span class="n">XOR</span><span class="o">-</span><span class="n">DIP</span>
<span class="n">Least</span> <span class="n">Active</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">1</span>  <span class="n">Max</span> <span class="n">Bandwidth</span><span class="o">-</span><span class="n">affected</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">Operate</span> <span class="n">status</span><span class="p">:</span> <span class="n">up</span>          <span class="n">Number</span> <span class="n">Of</span> <span class="n">Up</span> <span class="n">Port</span> <span class="n">In</span> <span class="n">Trunk</span><span class="p">:</span> <span class="mi">2</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">PortName</span>                      <span class="n">Status</span>      <span class="n">Weight</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>          <span class="n">Up</span>          <span class="mi">1</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>         <span class="n">Up</span>          <span class="mi">1</span>


<span class="p">[</span><span class="n">sw2</span><span class="p">]</span><span class="n">display</span> <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span><span class="s1">&#39;s state information is:</span>
<span class="n">WorkingMode</span><span class="p">:</span> <span class="n">NORMAL</span>         <span class="n">Hash</span> <span class="n">arithmetic</span><span class="p">:</span> <span class="n">According</span> <span class="n">to</span> <span class="n">SIP</span><span class="o">-</span><span class="n">XOR</span><span class="o">-</span><span class="n">DIP</span>
<span class="n">Least</span> <span class="n">Active</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">1</span>  <span class="n">Max</span> <span class="n">Bandwidth</span><span class="o">-</span><span class="n">affected</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">Operate</span> <span class="n">status</span><span class="p">:</span> <span class="n">up</span>          <span class="n">Number</span> <span class="n">Of</span> <span class="n">Up</span> <span class="n">Port</span> <span class="n">In</span> <span class="n">Trunk</span><span class="p">:</span> <span class="mi">2</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">PortName</span>                      <span class="n">Status</span>      <span class="n">Weight</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>          <span class="n">Up</span>          <span class="mi">1</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>         <span class="n">Up</span>          <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="lacp">
<h3><a class="toc-backref" href="#id31">2.配置静态LACP</a><a class="headerlink" href="#lacp" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>配置文件如下：</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW1</span>
<span class="c1">#</span>
<span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>   <span class="c1">#设置SW1为LACP主动端</span>

<span class="n">interface</span> <span class="n">Vlanif1</span>

<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span>
 <span class="n">mode</span> <span class="n">lacp</span><span class="o">-</span><span class="n">static</span>

<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
 <span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>   <span class="c1">#配置接口优先级确定活动链路</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
 <span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>   <span class="c1">#配置接口优先级确定活动链路</span>
<span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW2</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>查看Eth-trunk的配置结果</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW1</span><span class="p">]</span><span class="n">display</span> <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span><span class="s1">&#39;s state information is:</span>
<span class="n">Local</span><span class="p">:</span>
<span class="n">LAG</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>                   <span class="n">WorkingMode</span><span class="p">:</span> <span class="n">STATIC</span>
<span class="n">Preempt</span> <span class="n">Delay</span><span class="p">:</span> <span class="n">Disabled</span>     <span class="n">Hash</span> <span class="n">arithmetic</span><span class="p">:</span> <span class="n">According</span> <span class="n">to</span> <span class="n">SIP</span><span class="o">-</span><span class="n">XOR</span><span class="o">-</span><span class="n">DIP</span>
<span class="n">System</span> <span class="n">Priority</span><span class="p">:</span> <span class="mi">100</span>        <span class="n">System</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccf3</span><span class="o">-</span><span class="mi">0486</span>
<span class="n">Least</span> <span class="n">Active</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">1</span>  <span class="n">Max</span> <span class="n">Active</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">Operate</span> <span class="n">status</span><span class="p">:</span> <span class="n">up</span>          <span class="n">Number</span> <span class="n">Of</span> <span class="n">Up</span> <span class="n">Port</span> <span class="n">In</span> <span class="n">Trunk</span><span class="p">:</span> <span class="mi">2</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ActorPortName</span>          <span class="n">Status</span>   <span class="n">PortType</span> <span class="n">PortPri</span> <span class="n">PortNo</span> <span class="n">PortKey</span> <span class="n">PortState</span> <span class="n">Weight</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>   <span class="n">Selected</span> <span class="mi">1</span><span class="n">GE</span>      <span class="mi">100</span>     <span class="mi">10</span>     <span class="mi">305</span>     <span class="mi">10111100</span>  <span class="mi">1</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>  <span class="n">Selected</span> <span class="mi">1</span><span class="n">GE</span>      <span class="mi">100</span>     <span class="mi">11</span>     <span class="mi">305</span>     <span class="mi">10111100</span>  <span class="mi">1</span>

<span class="n">Partner</span><span class="p">:</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ActorPortName</span>          <span class="n">SysPri</span>   <span class="n">SystemID</span>        <span class="n">PortPri</span> <span class="n">PortNo</span> <span class="n">PortKey</span> <span class="n">PortState</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>   <span class="mi">32768</span>    <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccaa</span><span class="o">-</span><span class="mi">681</span><span class="n">d</span>  <span class="mi">32768</span>   <span class="mi">10</span>     <span class="mi">305</span>     <span class="mi">10111100</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>  <span class="mi">32768</span>    <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccaa</span><span class="o">-</span><span class="mi">681</span><span class="n">d</span>  <span class="mi">32768</span>   <span class="mi">11</span>     <span class="mi">305</span>     <span class="mi">10111100</span>
<span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span><span class="s1">&#39;s state information is:</span>
<span class="n">Local</span><span class="p">:</span>
<span class="n">LAG</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>                   <span class="n">WorkingMode</span><span class="p">:</span> <span class="n">STATIC</span>
<span class="n">Preempt</span> <span class="n">Delay</span><span class="p">:</span> <span class="n">Disabled</span>     <span class="n">Hash</span> <span class="n">arithmetic</span><span class="p">:</span> <span class="n">According</span> <span class="n">to</span> <span class="n">SIP</span><span class="o">-</span><span class="n">XOR</span><span class="o">-</span><span class="n">DIP</span>
<span class="n">System</span> <span class="n">Priority</span><span class="p">:</span> <span class="mi">32768</span>      <span class="n">System</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccaa</span><span class="o">-</span><span class="mi">681</span><span class="n">d</span>
<span class="n">Least</span> <span class="n">Active</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">1</span>  <span class="n">Max</span> <span class="n">Active</span><span class="o">-</span><span class="n">linknumber</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">Operate</span> <span class="n">status</span><span class="p">:</span> <span class="n">up</span>          <span class="n">Number</span> <span class="n">Of</span> <span class="n">Up</span> <span class="n">Port</span> <span class="n">In</span> <span class="n">Trunk</span><span class="p">:</span> <span class="mi">2</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ActorPortName</span>          <span class="n">Status</span>   <span class="n">PortType</span> <span class="n">PortPri</span> <span class="n">PortNo</span> <span class="n">PortKey</span> <span class="n">PortState</span> <span class="n">Weight</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>   <span class="n">Selected</span> <span class="mi">1</span><span class="n">GE</span>      <span class="mi">32768</span>   <span class="mi">10</span>     <span class="mi">305</span>     <span class="mi">10111100</span>  <span class="mi">1</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>  <span class="n">Selected</span> <span class="mi">1</span><span class="n">GE</span>      <span class="mi">32768</span>   <span class="mi">11</span>     <span class="mi">305</span>     <span class="mi">10111100</span>  <span class="mi">1</span>

<span class="n">Partner</span><span class="p">:</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ActorPortName</span>          <span class="n">SysPri</span>   <span class="n">SystemID</span>        <span class="n">PortPri</span> <span class="n">PortNo</span> <span class="n">PortKey</span> <span class="n">PortState</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>   <span class="mi">100</span>      <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccf3</span><span class="o">-</span><span class="mi">0486</span>  <span class="mi">100</span>     <span class="mi">10</span>     <span class="mi">305</span>     <span class="mi">10111100</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>  <span class="mi">100</span>      <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccf3</span><span class="o">-</span><span class="mi">0486</span>  <span class="mi">100</span>     <span class="mi">11</span>     <span class="mi">305</span>     <span class="mi">10111100</span>
</pre></div>
</div>
</section>
</section>
<section id="vlan">
<h2><a class="toc-backref" href="#id32"><span class="section-number">1.2.4. </span>VLAN配置</a><a class="headerlink" href="#vlan" title="Permalink to this headline">¶</a></h2>
<p>学习目的</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span><span class="n">掌握vlan的创建方法</span>
<span class="mf">2.</span><span class="n">掌握Access和Trunk类型接口的配置方法</span>
<span class="mf">3.</span><span class="n">掌握Hybird接口的配置</span>
<span class="mf">4.</span><span class="n">掌握将接口与VLAN关联的配置方法</span>
</pre></div>
</div>
<p>拓扑图</p>
<p>VLAN配置实验拓扑图</p>
<p><img alt="image3" src="../../_images/network-vlan0001.png" /></p>
<section id="id11">
<h3><a class="toc-backref" href="#id33">配置文件</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>SW1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW1</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">3</span> <span class="n">to</span> <span class="mi">4</span>
<span class="c1">#</span>
<span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>

<span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">mode</span> <span class="n">lacp</span><span class="o">-</span><span class="n">static</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
 <span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
 <span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">3</span>
</pre></div>
</div>
</li>
<li><p>SW2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW2</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">mode</span> <span class="n">lacp</span><span class="o">-</span><span class="n">static</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>SW3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">sw3</span><span class="p">]</span><span class="n">dis</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">sw3</span>

<span class="n">interface</span> <span class="n">Vlanif1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.2</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
</pre></div>
</div>
</li>
<li><p>SW4</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Huawei</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">Huawei</span>

<span class="n">interface</span> <span class="n">Vlanif1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.4</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
</pre></div>
</div>
</li>
<li><p>R1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
</pre></div>
</div>
</li>
<li><p>R3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.3</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
</pre></div>
</div>
<p>R1和R3在同一vlan，可以互通，如下：</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R4</span><span class="o">-</span><span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span><span class="n">ping</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span>
  <span class="n">PING</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span><span class="p">:</span> <span class="mi">56</span>  <span class="n">data</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">press</span> <span class="n">CTRL_C</span> <span class="n">to</span> <span class="k">break</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">255</span> <span class="n">time</span><span class="o">=</span><span class="mi">110</span> <span class="n">ms</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">2</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">255</span> <span class="n">time</span><span class="o">=</span><span class="mi">70</span> <span class="n">ms</span>

<span class="p">[</span><span class="n">R3</span><span class="p">]</span><span class="n">ping</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.3</span>
  <span class="n">PING</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.3</span><span class="p">:</span> <span class="mi">56</span>  <span class="n">data</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">press</span> <span class="n">CTRL_C</span> <span class="n">to</span> <span class="k">break</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.3</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">255</span> <span class="n">time</span><span class="o">=</span><span class="mi">80</span> <span class="n">ms</span>
    <span class="n">Reply</span> <span class="kn">from</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.3</span><span class="p">:</span> <span class="nb">bytes</span><span class="o">=</span><span class="mi">56</span> <span class="n">Sequence</span><span class="o">=</span><span class="mi">2</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">255</span> <span class="n">time</span><span class="o">=</span><span class="mi">70</span> <span class="n">ms</span>
</pre></div>
</div>
<p>实现效果; R3、R4、SW4之间互通，Vlan2和Vlan4打通通信</p>
<p>​ SW1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW1</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">mode</span> <span class="n">lacp</span><span class="o">-</span><span class="n">static</span>
                        <span class="c1">#</span>
                        <span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
                         <span class="n">port</span> <span class="n">hybrid</span> <span class="n">pvid</span> <span class="n">vlan</span> <span class="mi">4</span>
                         <span class="n">port</span> <span class="n">hybrid</span> <span class="n">untagged</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
 <span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
 <span class="n">lacp</span> <span class="n">priority</span> <span class="mi">100</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">3</span>
</pre></div>
</div>
<p>SW2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW2</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">mode</span> <span class="n">lacp</span><span class="o">-</span><span class="n">static</span>
                    <span class="c1">#</span>
                    <span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
                     <span class="n">port</span> <span class="n">hybrid</span> <span class="n">pvid</span> <span class="n">vlan</span> <span class="mi">4</span>
                     <span class="n">port</span> <span class="n">hybrid</span> <span class="n">untagged</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">undo</span> <span class="n">negotiation</span> <span class="n">auto</span>
 <span class="n">speed</span> <span class="mi">100</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>

<span class="c1">#</span>
                    <span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
                     <span class="n">port</span> <span class="n">hybrid</span> <span class="n">pvid</span> <span class="n">vlan</span> <span class="mi">2</span>
                     <span class="n">port</span> <span class="n">hybrid</span> <span class="n">untagged</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
</section>
<section id="gvrp">
<h2><a class="toc-backref" href="#id34"><span class="section-number">1.2.5. </span>GVRP配置</a><a class="headerlink" href="#gvrp" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span><span class="n">掌握GVRP的配置方法</span>
<span class="mf">2.</span><span class="n">掌握GVRP不同注册模式的配置方法</span>
</pre></div>
</div>
<p>拓扑图</p>
<p><img alt="image4" src="../../_images/network-GVRP01.png" /></p>
<p><strong>场景</strong></p>
<p>企业网绍中往会使用大量的交换机目需要在网络中划分不同的VLAN ， 若
网络管理员采用手工配置VLAN 的创建和删除，工作量极大而目容易出错。这种
情况下迎可以通过GVRP 的VLAN 动态注册功能来自动完成VLAN 的配置。</p>
<section id="id12">
<span id="id13"></span><h3><a class="toc-backref" href="#id35">配置文件</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>sw1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">Sw1</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span>
<span class="c1">#</span>
<span class="n">gvrp</span>

<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">gvrp</span>

<span class="n">interface</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">gvrp</span>
</pre></div>
</div>
<p>sw1查看学习到的vlan</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Sw1</span><span class="p">]</span><span class="n">display</span>  <span class="n">vlan</span>
<span class="n">Dec</span> <span class="mi">21</span> <span class="mi">2018</span> <span class="mi">15</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">Sw1</span> <span class="n">DS</span><span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="n">DATASYNC_CFGCHANGE</span><span class="p">:</span><span class="n">OID</span> <span class="mf">1.3</span><span class="o">.</span><span class="mf">6.1</span><span class="o">.</span><span class="mf">4.1</span><span class="o">.</span><span class="mf">2011.5</span><span class="o">.</span><span class="mi">25</span>
<span class="o">.</span><span class="mf">191.3</span><span class="o">.</span><span class="mi">1</span> <span class="n">configurations</span> <span class="n">have</span> <span class="n">been</span> <span class="n">changed</span><span class="o">.</span> <span class="n">The</span> <span class="n">current</span> <span class="n">change</span> <span class="n">number</span> <span class="ow">is</span> <span class="mi">20</span><span class="p">,</span> <span class="n">the</span>
<span class="n">change</span> <span class="n">loop</span> <span class="n">count</span> <span class="ow">is</span> <span class="mi">0</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">records</span> <span class="ow">is</span> <span class="mf">4095.</span> <span class="n">vlan</span>
<span class="n">The</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vlans</span> <span class="ow">is</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">U</span><span class="p">:</span> <span class="n">Up</span><span class="p">;</span>         <span class="n">D</span><span class="p">:</span> <span class="n">Down</span><span class="p">;</span>         <span class="n">TG</span><span class="p">:</span> <span class="n">Tagged</span><span class="p">;</span>         <span class="n">UT</span><span class="p">:</span> <span class="n">Untagged</span><span class="p">;</span>
<span class="n">MP</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">mapping</span><span class="p">;</span>               <span class="n">ST</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">stacking</span><span class="p">;</span>
<span class="c1">#: ProtocolTransparent-vlan;    *: Management-vlan;</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">VID</span>  <span class="n">Type</span>    <span class="n">Ports</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">1</span>    <span class="n">common</span>  <span class="n">UT</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">6</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">7</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">11</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">14</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">15</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">17</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">19</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">20</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">21</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>      <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

<span class="mi">2</span>    <span class="n">common</span>  <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>

<span class="mi">100</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>

<span class="mi">200</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>


<span class="n">VID</span>  <span class="n">Status</span>  <span class="n">Property</span>      <span class="n">MAC</span><span class="o">-</span><span class="n">LRN</span> <span class="n">Statistics</span> <span class="n">Description</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="mi">1</span>    <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0001</span>
<span class="mi">2</span>    <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0002</span>

<span class="mi">100</span>  <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0100</span>
<span class="mi">200</span>  <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0200</span>
</pre></div>
</div>
<p>sw2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW2</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span>
<span class="c1">#</span>
<span class="n">gvrp</span>

<span class="n">interface</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">gvrp</span>

<span class="n">interface</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">gvrp</span>
</pre></div>
</div>
<p>查看sw2 学习到的vlan</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">vlan</span>
<span class="n">The</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vlans</span> <span class="ow">is</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">U</span><span class="p">:</span> <span class="n">Up</span><span class="p">;</span>         <span class="n">D</span><span class="p">:</span> <span class="n">Down</span><span class="p">;</span>         <span class="n">TG</span><span class="p">:</span> <span class="n">Tagged</span><span class="p">;</span>         <span class="n">UT</span><span class="p">:</span> <span class="n">Untagged</span><span class="p">;</span>
<span class="n">MP</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">mapping</span><span class="p">;</span>               <span class="n">ST</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">stacking</span><span class="p">;</span>
<span class="c1">#: ProtocolTransparent-vlan;    *: Management-vlan;</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">VID</span>  <span class="n">Type</span>    <span class="n">Ports</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">1</span>    <span class="n">common</span>  <span class="n">UT</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">6</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">7</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">11</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">14</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">15</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">17</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">19</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">20</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">21</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>    <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>      <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

<span class="mi">2</span>    <span class="n">common</span>  <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>

<span class="mi">100</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>

<span class="mi">200</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>


<span class="n">VID</span>  <span class="n">Status</span>  <span class="n">Property</span>      <span class="n">MAC</span><span class="o">-</span><span class="n">LRN</span> <span class="n">Statistics</span> <span class="n">Description</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="mi">1</span>    <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0001</span>
<span class="mi">2</span>    <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0002</span>
<span class="mi">100</span>  <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0100</span>
<span class="mi">200</span>  <span class="n">enable</span>  <span class="n">default</span>       <span class="n">enable</span>  <span class="n">disable</span>    <span class="n">VLAN</span> <span class="mi">0200</span>
</pre></div>
</div>
<p>sw3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW3</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW3</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span> <span class="mi">100</span> <span class="mi">200</span>
<span class="c1">#</span>
<span class="n">gvrp</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">gvrp</span>
</pre></div>
</div>
<p>sw4</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW4</span><span class="p">]</span><span class="n">displa</span> <span class="n">cu</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW4</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">2</span> <span class="mi">100</span> <span class="mi">200</span>
<span class="c1">#</span>
<span class="n">gvrp</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
 <span class="n">gvrp</span>
</pre></div>
</div>
<p>需要手动的设置vlan SW3：vlan 100 SW4：vlan 200
使得sw1和sw2交换机两端都能动态的学习到vlan信息，这样报文就能够双向通信</p>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id36">修改交换机接口的注册模式</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>sw1</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="o">-</span><span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span><span class="n">gvrp</span> <span class="n">registration</span> <span class="n">fixed</span>


<span class="p">[</span><span class="n">Sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">gvrp</span> <span class="n">statistics</span>
  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">45</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">cc40</span><span class="o">-</span><span class="mi">0</span><span class="n">f86</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Fixed</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">0</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccbe</span><span class="o">-</span><span class="mi">3</span><span class="n">f53</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Normal</span>



<span class="p">[</span><span class="n">Sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">vlan</span>
<span class="n">The</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vlans</span> <span class="ow">is</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">U</span><span class="p">:</span> <span class="n">Up</span><span class="p">;</span>         <span class="n">D</span><span class="p">:</span> <span class="n">Down</span><span class="p">;</span>         <span class="n">TG</span><span class="p">:</span> <span class="n">Tagged</span><span class="p">;</span>         <span class="n">UT</span><span class="p">:</span> <span class="n">Untagged</span><span class="p">;</span>
<span class="n">MP</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">mapping</span><span class="p">;</span>               <span class="n">ST</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">stacking</span><span class="p">;</span>
<span class="c1">#: ProtocolTransparent-vlan;    *: Management-vlan;</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">VID</span>  <span class="n">Type</span>    <span class="n">Ports</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">1</span>    <span class="n">common</span>  <span class="n">UT</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">6</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">7</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">11</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">14</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">15</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">17</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">19</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">20</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">21</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>      <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>




<span class="mi">2</span>    <span class="n">common</span>  <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>


<span class="mi">100</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
<span class="mi">200</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>sw2</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="o">-</span><span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span><span class="n">gvrp</span> <span class="n">registration</span> <span class="n">fixed</span>


<span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">gvrp</span> <span class="n">statistics</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">2</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">cce9</span><span class="o">-</span><span class="mi">6</span><span class="n">d23</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Fixed</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">0</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccac</span><span class="o">-</span><span class="mi">22</span><span class="n">b1</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Normal</span>


<span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">vlan</span>
<span class="n">The</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vlans</span> <span class="ow">is</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">U</span><span class="p">:</span> <span class="n">Up</span><span class="p">;</span>         <span class="n">D</span><span class="p">:</span> <span class="n">Down</span><span class="p">;</span>         <span class="n">TG</span><span class="p">:</span> <span class="n">Tagged</span><span class="p">;</span>         <span class="n">UT</span><span class="p">:</span> <span class="n">Untagged</span><span class="p">;</span>
<span class="n">MP</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">mapping</span><span class="p">;</span>               <span class="n">ST</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">stacking</span><span class="p">;</span>
<span class="c1">#: ProtocolTransparent-vlan;    *: Management-vlan;</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">VID</span>  <span class="n">Type</span>    <span class="n">Ports</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">1</span>    <span class="n">common</span>  <span class="n">UT</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">6</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">7</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">11</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">14</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">15</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">17</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">19</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">20</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">21</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>    <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>      <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

<span class="mi">2</span>    <span class="n">common</span>  <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>



<span class="mi">100</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
<span class="mi">200</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
</pre></div>
</div>
<p>回显信息中灰色阴影标注的部分表明端口E0/0/1无法注册动态VLAN100和200</p>
<p>配置S1、S2 E0/0/1接口的注册模式为Forbidden</p>
<ul class="simple">
<li><p>sw1</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Sw1</span><span class="o">-</span><span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span><span class="n">gvrp</span> <span class="n">registration</span> <span class="n">forbidden</span>
<span class="n">Info</span><span class="p">:</span> <span class="n">This</span> <span class="n">operation</span> <span class="n">may</span> <span class="n">take</span> <span class="n">a</span> <span class="n">few</span> <span class="n">seconds</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">a</span> <span class="n">moment</span><span class="o">...</span><span class="n">done</span><span class="o">.</span>

<span class="p">[</span><span class="n">Sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">gvrp</span> <span class="n">statistics</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">87</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">cc40</span><span class="o">-</span><span class="mi">0</span><span class="n">f86</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Forbidden</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">0</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccbe</span><span class="o">-</span><span class="mi">3</span><span class="n">f53</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Normal</span>

<span class="p">[</span><span class="n">Sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">vlan</span>
<span class="n">The</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vlans</span> <span class="ow">is</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">U</span><span class="p">:</span> <span class="n">Up</span><span class="p">;</span>         <span class="n">D</span><span class="p">:</span> <span class="n">Down</span><span class="p">;</span>         <span class="n">TG</span><span class="p">:</span> <span class="n">Tagged</span><span class="p">;</span>         <span class="n">UT</span><span class="p">:</span> <span class="n">Untagged</span><span class="p">;</span>
<span class="n">MP</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">mapping</span><span class="p">;</span>               <span class="n">ST</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">stacking</span><span class="p">;</span>
<span class="c1">#: ProtocolTransparent-vlan;    *: Management-vlan;</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">VID</span>  <span class="n">Type</span>    <span class="n">Ports</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">1</span>    <span class="n">common</span>  <span class="n">UT</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">6</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">7</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">11</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">14</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">15</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">17</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">19</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">20</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">21</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>      <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="mi">2</span>    <span class="n">common</span>  <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>

<span class="mi">100</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
<span class="mi">200</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>sw2</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="o">-</span><span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span><span class="n">gvrp</span> <span class="n">registration</span> <span class="n">forbidden</span>

<span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">gvrp</span> <span class="n">statistics</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">63</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">cce9</span><span class="o">-</span><span class="mi">6</span><span class="n">d23</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Forbidden</span>

  <span class="n">GVRP</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">port</span> <span class="n">Ethernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span>
    <span class="n">GVRP</span> <span class="n">status</span>             <span class="p">:</span> <span class="n">Enabled</span>
    <span class="n">GVRP</span> <span class="n">registrations</span> <span class="n">failed</span>       <span class="p">:</span> <span class="mi">0</span>
    <span class="n">GVRP</span> <span class="n">last</span> <span class="n">PDU</span> <span class="n">origin</span>        <span class="p">:</span> <span class="mi">4</span><span class="n">c1f</span><span class="o">-</span><span class="n">ccac</span><span class="o">-</span><span class="mi">22</span><span class="n">b1</span>
    <span class="n">GVRP</span> <span class="n">registration</span> <span class="nb">type</span>      <span class="p">:</span> <span class="n">Normal</span>

<span class="p">[</span><span class="n">SW2</span><span class="p">]</span><span class="n">display</span> <span class="n">vlan</span>
<span class="n">The</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vlans</span> <span class="ow">is</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">U</span><span class="p">:</span> <span class="n">Up</span><span class="p">;</span>         <span class="n">D</span><span class="p">:</span> <span class="n">Down</span><span class="p">;</span>         <span class="n">TG</span><span class="p">:</span> <span class="n">Tagged</span><span class="p">;</span>         <span class="n">UT</span><span class="p">:</span> <span class="n">Untagged</span><span class="p">;</span>
<span class="n">MP</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">mapping</span><span class="p">;</span>               <span class="n">ST</span><span class="p">:</span> <span class="n">Vlan</span><span class="o">-</span><span class="n">stacking</span><span class="p">;</span>
<span class="c1">#: ProtocolTransparent-vlan;    *: Management-vlan;</span>
<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">VID</span>  <span class="n">Type</span>    <span class="n">Ports</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">1</span>    <span class="n">common</span>  <span class="n">UT</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">6</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">7</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">8</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>     <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">11</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">14</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">15</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">17</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">19</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">20</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
                <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">21</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>    <span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>    <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>      <span class="n">GE0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

<span class="mi">2</span>    <span class="n">common</span>  <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>

<span class="mi">100</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
<span class="mi">200</span>  <span class="n">dynamic</span> <span class="n">TG</span><span class="p">:</span><span class="n">Eth0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">22</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>在
Forbidden模式下E0/0/1接口只允许VLAN1的报文通过，禁止任何其他VLAN的报文通过</p></li>
</ul>
</section>
</section>
<section id="id15">
<h2><a class="toc-backref" href="#id37"><span class="section-number">1.2.6. </span>VLAN间路由</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<section id="id16">
<h3><a class="toc-backref" href="#id38">掌握知识</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">掌握用于VLAN间路由的Trunk接口的配置方法</span>
<span class="mi">2</span> <span class="n">掌握单个物理接口上配置多个子接口的方法</span>
<span class="mi">3</span> <span class="n">掌握VLAN间实现ARP通信的配置方法</span>
</pre></div>
</div>
<p>单臂路由</p>
<p><img alt="image5" src="../../_images/network-danbiroute01.png" /></p>
<ul class="simple">
<li><p>R1配置</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">[</span><span class="n">V200R003C00</span><span class="p">]</span>
<span class="c1">#</span>
 <span class="n">sysname</span> <span class="n">R1</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

<span class="n">ip</span> <span class="n">route</span><span class="o">-</span><span class="n">static</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span>
</pre></div>
</div>
<ul class="simple">
<li><p>R2配置</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R2</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">[</span><span class="n">V200R003C00</span><span class="p">]</span>
<span class="c1">#</span>
 <span class="n">sysname</span> <span class="n">R2</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="c1">#</span>

<span class="n">ip</span> <span class="n">route</span><span class="o">-</span><span class="n">static</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.254</span>
</pre></div>
</div>
<ul class="simple">
<li><p>R3配置</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R3</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">[</span><span class="n">V200R003C00</span><span class="p">]</span>
<span class="c1">#</span>
 <span class="n">sysname</span> <span class="n">R3</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.1</span>
 <span class="n">dot1q</span> <span class="n">termination</span> <span class="n">vid</span> <span class="mi">4</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
 <span class="n">arp</span> <span class="n">broadcast</span> <span class="n">enable</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.2</span>
 <span class="n">dot1q</span> <span class="n">termination</span> <span class="n">vid</span> <span class="mi">8</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.254</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
 <span class="n">arp</span> <span class="n">broadcast</span> <span class="n">enable</span>

<span class="c1">#查看路由条目</span>
<span class="p">[</span><span class="n">R3</span><span class="p">]</span><span class="n">display</span> <span class="n">ip</span> <span class="n">routing</span><span class="o">-</span><span class="n">table</span>
<span class="n">Route</span> <span class="n">Flags</span><span class="p">:</span> <span class="n">R</span> <span class="o">-</span> <span class="n">relay</span><span class="p">,</span> <span class="n">D</span> <span class="o">-</span> <span class="n">download</span> <span class="n">to</span> <span class="n">fib</span>
<span class="o">------------------------------------------------------------------------------</span>
<span class="n">Routing</span> <span class="n">Tables</span><span class="p">:</span> <span class="n">Public</span>
         <span class="n">Destinations</span> <span class="p">:</span> <span class="mi">10</span>       <span class="n">Routes</span> <span class="p">:</span> <span class="mi">10</span>

<span class="n">Destination</span><span class="o">/</span><span class="n">Mask</span>    <span class="n">Proto</span>   <span class="n">Pre</span>  <span class="n">Cost</span>      <span class="n">Flags</span> <span class="n">NextHop</span>         <span class="n">Interface</span>

       <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span>      <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.1</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.1</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.1</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.254</span>      <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.2</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.2</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">8.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mf">1.2</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span>   <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
<span class="mf">127.255</span><span class="o">.</span><span class="mf">255.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
<span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>SW配置</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW1</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">4</span> <span class="mi">8</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">4</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">4</span> <span class="mi">8</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">8</span>
</pre></div>
</div>
<ul class="simple">
<li><p>vlan4和vlan8之间可以互通</p></li>
</ul>
<section id="id17">
<h4>配置三层交换<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">掌握三层交换机实现VLAN通信的方法</span>
<span class="o">-</span> <span class="n">通过Trunk链路实现VLAN间通信的配置方法</span>
<span class="o">-</span> <span class="n">配置不同VLAN间动态路由协议OSPF的方法</span>
</pre></div>
</div>
<p>拓扑图</p>
<p>三层交换实验拓扑</p>
<p><img alt="image6" src="../../_images/network-vlanif01.png" /></p>
<ul class="simple">
<li><p>SW1</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">sw1</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">sw1</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">3</span> <span class="n">to</span> <span class="mi">7</span>

<span class="n">interface</span> <span class="n">Vlanif3</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.254</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Vlanif4</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Vlanif5</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>


<span class="n">interface</span> <span class="n">Eth</span><span class="o">-</span><span class="n">Trunk1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">trunk</span>
 <span class="n">port</span> <span class="n">trunk</span> <span class="n">allow</span><span class="o">-</span><span class="k">pass</span> <span class="n">vlan</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">4094</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">4</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">13</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">3</span>

<span class="n">ospf</span> <span class="mi">1</span>
 <span class="n">area</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
  <span class="n">network</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.255</span><span class="o">.</span><span class="mf">255.255</span>



 <span class="p">[</span><span class="n">sw1</span><span class="p">]</span><span class="n">display</span> <span class="n">ip</span> <span class="n">routing</span><span class="o">-</span><span class="n">table</span>
<span class="n">Route</span> <span class="n">Flags</span><span class="p">:</span> <span class="n">R</span> <span class="o">-</span> <span class="n">relay</span><span class="p">,</span> <span class="n">D</span> <span class="o">-</span> <span class="n">download</span> <span class="n">to</span> <span class="n">fib</span>
<span class="o">------------------------------------------------------------------------------</span>
<span class="n">Routing</span> <span class="n">Tables</span><span class="p">:</span> <span class="n">Public</span>
         <span class="n">Destinations</span> <span class="p">:</span> <span class="mi">10</span>       <span class="n">Routes</span> <span class="p">:</span> <span class="mi">10</span>

<span class="n">Destination</span><span class="o">/</span><span class="n">Mask</span>    <span class="n">Proto</span>   <span class="n">Pre</span>  <span class="n">Cost</span>      <span class="n">Flags</span> <span class="n">NextHop</span>         <span class="n">Interface</span>

       <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.254</span>      <span class="n">Vlanif3</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">Vlanif3</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span>      <span class="n">Vlanif4</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">Vlanif4</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.1</span>        <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.1</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">OSPF</span>    <span class="mi">10</span>   <span class="mi">2</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.2</span>        <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">OSPF</span>    <span class="mi">10</span>   <span class="mi">2</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.2</span>        <span class="n">Vlanif5</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span>   <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>SW2</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW2</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">area</span><span class="o">-</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW2</span>
<span class="c1">#</span>
<span class="n">vlan</span> <span class="n">batch</span> <span class="mi">3</span> <span class="n">to</span> <span class="mi">7</span>

<span class="n">interface</span> <span class="n">Vlanif5</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.2</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Vlanif6</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.254</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">Vlanif7</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.254</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">6</span>
<span class="c1">#</span>
<span class="n">i</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">9</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>
<span class="c1">#</span>
<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span>
 <span class="n">eth</span><span class="o">-</span><span class="n">trunk</span> <span class="mi">1</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">12</span>
 <span class="n">port</span> <span class="n">link</span><span class="o">-</span><span class="nb">type</span> <span class="n">access</span>
 <span class="n">port</span> <span class="n">default</span> <span class="n">vlan</span> <span class="mi">7</span>
<span class="c1">#</span>

 <span class="n">area</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
  <span class="n">network</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.255</span><span class="o">.</span><span class="mf">255.255</span>


  <span class="p">[</span><span class="n">SW2</span><span class="o">-</span><span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">3</span><span class="p">]</span><span class="n">display</span> <span class="n">ip</span> <span class="n">routing</span><span class="o">-</span><span class="n">table</span>
<span class="n">Route</span> <span class="n">Flags</span><span class="p">:</span> <span class="n">R</span> <span class="o">-</span> <span class="n">relay</span><span class="p">,</span> <span class="n">D</span> <span class="o">-</span> <span class="n">download</span> <span class="n">to</span> <span class="n">fib</span>
<span class="o">------------------------------------------------------------------------------</span>
<span class="n">Routing</span> <span class="n">Tables</span><span class="p">:</span> <span class="n">Public</span>
         <span class="n">Destinations</span> <span class="p">:</span> <span class="mi">10</span>       <span class="n">Routes</span> <span class="p">:</span> <span class="mi">10</span>

<span class="n">Destination</span><span class="o">/</span><span class="n">Mask</span>    <span class="n">Proto</span>   <span class="n">Pre</span>  <span class="n">Cost</span>      <span class="n">Flags</span> <span class="n">NextHop</span>         <span class="n">Interface</span>

       <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">OSPF</span>    <span class="mi">10</span>   <span class="mi">2</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.1</span>        <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">OSPF</span>    <span class="mi">10</span>   <span class="mi">2</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.1</span>        <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.2</span>        <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">5.2</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">Vlanif5</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.254</span>      <span class="n">Vlanif6</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">Vlanif6</span>
       <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.0</span><span class="o">/</span><span class="mi">24</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.254</span>      <span class="n">Vlanif7</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.254</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">Vlanif7</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span>   <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
      <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">32</span>  <span class="n">Direct</span>  <span class="mi">0</span>    <span class="mi">0</span>           <span class="n">D</span>   <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>       <span class="n">InLoopBack0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>R1</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">[</span><span class="n">V200R003C00</span><span class="p">]</span>
<span class="c1">#</span>
 <span class="n">sysname</span> <span class="n">R1</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="n">ip</span> <span class="n">route</span><span class="o">-</span><span class="n">static</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">4.254</span>
</pre></div>
</div>
<ul class="simple">
<li><p>R2</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R2</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">[</span><span class="n">V200R003C00</span><span class="p">]</span>
<span class="c1">#</span>
 <span class="n">sysname</span> <span class="n">R2</span>

<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

<span class="n">ip</span> <span class="n">route</span><span class="o">-</span><span class="n">static</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">6.254</span>
</pre></div>
</div>
<ul class="simple">
<li><p>SW3</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW3</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW3</span>
<span class="n">interface</span> <span class="n">Vlanif1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

<span class="n">ip</span> <span class="n">route</span><span class="o">-</span><span class="n">static</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">3.254</span>
</pre></div>
</div>
<ul class="simple">
<li><p>SW4</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SW4</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="c1">#</span>
<span class="n">sysname</span> <span class="n">SW4</span>
<span class="n">interface</span> <span class="n">Vlanif1</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

<span class="n">ip</span> <span class="n">route</span><span class="o">-</span><span class="n">static</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">7.254</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="ip-acl">
<h2><a class="toc-backref" href="#id39"><span class="section-number">1.2.7. </span>IP安全配置(ACL)</a><a class="headerlink" href="#ip-acl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">掌握高级ACL的配置方法</span>
<span class="o">-</span> <span class="n">掌握ACL在接口下的应用方法</span>
</pre></div>
</div>
<p>拓扑图</p>
<p>配置ACL过滤企业数据实验拓扑图</p>
<p><img alt="image7" src="../../_images/network_ACL01.png" /></p>
<ul class="simple">
<li><p>R1</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">R1</span><span class="p">]</span><span class="n">display</span> <span class="n">current</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">[</span><span class="n">V200R003C00</span><span class="p">]</span>
<span class="c1">#</span>
 <span class="n">sysname</span> <span class="n">R1</span>


<span class="n">interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
 <span class="n">ip</span> <span class="n">address</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">13.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

<span class="c1">#</span>
<span class="n">ospf</span> <span class="mi">1</span>
 <span class="n">area</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
  <span class="n">network</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">13.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.255</span>
</pre></div>
</div>
<ul class="simple">
<li><p>R2</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[R2]display current-configuration
[V200R003C00]
#
 sysname R2
#
 snmp-agent local-engineid 800007DB03000000000000
 snmp-agent
#
 clock timezone China-Standard-Time minus 08:00:00
#
portal local-server load portalpage.zip
#
 drop illegal-mac alarm
#
 set cpu-usage threshold 80 restore 75
#
acl number 3000
 rule 5 permit tcp source 10.0.13.1 0 destination 10.0.4.254 0 destination-port
eq telnet
 rule 10 permit tcp source 10.0.13.3 0 destination 10.0.6.254 0 destination-port
 range ftp-data ftp
 rule 15 deny ip
#
aaa
 authentication-scheme default
 authorization-scheme default
 accounting-scheme default
 domain default
 domain default_admin
 local-user admin password cipher %$%$K8m.Nt84DZ}e#&lt;0`8bmE3Uw}%$%$
 local-user admin service-type http
#
firewall zone Local
 priority 15
#
interface GigabitEthernet0/0/0
 ip address 10.0.13.2 255.255.255.0
#
interface GigabitEthernet0/0/1
 ip address 10.0.4.2 255.255.255.0
#
interface GigabitEthernet0/0/2
 ip address 10.0.6.2 255.255.255.0
 traffic-filter inbound acl 3000
#
interface NULL0
#
ospf 1
 area 0.0.0.0
  network 10.0.4.0 0.0.0.255
  network 10.0.6.0 0.0.0.255
  network 10.0.13.0 0.0.0.255
#
user-interface con 0
 authentication-mode password
user-interface vty 0 4
user-interface vty 16 20
</pre></div>
</div>
<ul class="simple">
<li><p>R3</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[R3]display current-configuration
[V200R003C00]
#
 sysname R3

aaa
 authentication-scheme default
 authorization-scheme default
 accounting-scheme default
 domain default
 domain default_admin
 local-user admin password cipher %$%$K8m.Nt84DZ}e#&lt;0`8bmE3Uw}%$%$
 local-user admin service-type http
#
firewall zone Local
 priority 15
#
interface GigabitEthernet0/0/0
 ip address 10.0.13.3 255.255.255.0


ospf 1
 area 0.0.0.0
  network 10.0.13.0 0.0.0.255
</pre></div>
</div>
<ul class="simple">
<li><p>SW1 telnet服务器</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;SW1&gt;display current-configuration
#
sysname SW1
#
vlan batch 4


interface Vlanif4
 ip address 10.0.4.254 255.255.255.0

#
interface GigabitEthernet0/0/2
 port link-type trunk
 port trunk pvid vlan 4
 port trunk allow-pass vlan 2 to 4094

#
ip route-static 0.0.0.0 0.0.0.0 10.0.4.2
user-interface con 0
user-interface vty 0 4
 set authentication password cipher Zm~.C3k[ND`S/0Rb{DzNkSg#
</pre></div>
</div>
<ul class="simple">
<li><p>SW2 ftp服务器</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[SW2]display current-configuration
#
sysname SW2
#
FTP server enable
#
vlan batch 6

aaa
 authentication-scheme default
 authorization-scheme default
 accounting-scheme default
 domain default
 domain default_admin
 local-user admin password simple admin
 local-user admin service-type http
 local-user huawei password cipher $K&amp;%QCXM$NYNZPO3JBXBHA!!
 local-user huawei ftp-directory flash:
 local-user huawei service-type ftp

interface Vlanif6
 ip address 10.0.6.254 255.255.255.0

interface GigabitEthernet0/0/2
 port link-type trunk
 port trunk pvid vlan 6
 port trunk allow-pass vlan 2 to 4094

ip route-static 0.0.0.0 0.0.0.0 10.0.6.2
#
user-interface con 0
user-interface vty 0 4
</pre></div>
</div>
<p><strong>R1可以访问S1的telnet服务器</strong> <strong>R2可以访问S2的ftp服务器</strong></p>
</section>
<section id="nat">
<h2><a class="toc-backref" href="#id40"><span class="section-number">1.2.8. </span>NAT的配置</a><a class="headerlink" href="#nat" title="Permalink to this headline">¶</a></h2>
<p>学习目标</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">掌握动态NAT的配置方法</span>
<span class="o">*</span> <span class="n">掌握Easy</span> <span class="n">IP的配置方法</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="01.HCNA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="btn btn-neutral float-left" title="1.1. HCNA基础知识" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="03.%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" class="btn btn-neutral float-right" title="1.3. 华为设备常用命令" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, huxiaojian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>